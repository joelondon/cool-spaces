(this["webpackJsonpcool-spaces"]=this["webpackJsonpcool-spaces"]||[]).push([[0],{121:function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));var n=a(16),o=a(129),r=a(2);function s(e){return Object(r.jsxs)(o.a,Object(n.a)(Object(n.a)({},e),{},{children:[Object(r.jsx)("path",{d:"m22 15.743c-1.11 0-1.73-0.37-2.18-0.64-0.37-0.22-0.6-0.36-1.15-0.36-0.56 0-0.78 0.13-1.15 0.36-0.45 0.27-1.07 0.64-2.18 0.64s-1.73-0.37-2.18-0.64c-0.37-0.22-0.6-0.36-1.15-0.36-0.56 0-0.78 0.13-1.15 0.36-0.45 0.27-1.07 0.64-2.18 0.64s-1.73-0.37-2.18-0.64c-0.37-0.22-0.6-0.36-1.15-0.36s-0.78 0.13-1.15 0.36c-0.47 0.27-1.09 0.64-2.2 0.64v-2c0.56 0 0.78-0.13 1.15-0.36 0.45-0.27 1.07-0.64 2.18-0.64s1.73 0.37 2.18 0.64c0.37 0.22 0.6 0.36 1.15 0.36 0.56 0 0.78-0.13 1.15-0.36 0.45-0.27 1.07-0.64 2.18-0.64s1.73 0.37 2.18 0.64c0.37 0.22 0.6 0.36 1.15 0.36s0.78-0.13 1.15-0.36c0.45-0.27 1.07-0.64 2.18-0.64s1.73 0.37 2.18 0.64c0.37 0.22 0.6 0.36 1.15 0.36v2z"}),Object(r.jsx)("path",{d:"m22 20.243c-1.11 0-1.73-0.37-2.18-0.64-0.37-0.22-0.6-0.36-1.15-0.36-0.56 0-0.78 0.13-1.15 0.36-0.46 0.27-1.07 0.64-2.18 0.64s-1.73-0.37-2.18-0.64c-0.37-0.22-0.6-0.36-1.15-0.36-0.56 0-0.78 0.13-1.15 0.36-0.46 0.27-1.08 0.64-2.19 0.64s-1.73-0.37-2.18-0.64c-0.37-0.23-0.6-0.36-1.15-0.36s-0.78 0.13-1.15 0.36c-0.46 0.27-1.08 0.64-2.19 0.64v-2c0.56 0 0.78-0.13 1.15-0.36 0.46-0.27 1.08-0.64 2.19-0.64s1.73 0.37 2.18 0.64c0.37 0.23 0.59 0.36 1.15 0.36s0.78-0.13 1.15-0.36c0.46-0.27 1.08-0.64 2.19-0.64s1.73 0.37 2.18 0.64c0.37 0.22 0.6 0.36 1.15 0.36s0.78-0.13 1.15-0.36c0.45-0.27 1.07-0.64 2.18-0.64s1.73 0.37 2.18 0.64c0.37 0.23 0.59 0.36 1.15 0.36z"}),Object(r.jsx)("path",{d:"m21.97 6.7342c-1.11 0-1.73-0.37-2.18-0.64-0.37-0.22-0.6-0.36-1.15-0.36-0.56 0-0.78 0.13-1.15 0.36-0.45 0.27-1.07 0.64-2.18 0.64s-1.73-0.37-2.18-0.64c-0.37-0.22-0.6-0.36-1.15-0.36-0.56 0-0.78 0.13-1.15 0.36-0.45 0.27-1.07 0.64-2.18 0.64s-1.73-0.37-2.18-0.64c-0.37-0.22-0.6-0.36-1.15-0.36s-0.78 0.13-1.15 0.36c-0.47 0.27-1.09 0.64-2.2 0.64v-2c0.56 0 0.78-0.13 1.15-0.36 0.45-0.27 1.07-0.64 2.18-0.64s1.73 0.37 2.18 0.64c0.37 0.22 0.6 0.36 1.15 0.36 0.56 0 0.78-0.13 1.15-0.36 0.45-0.27 1.07-0.64 2.18-0.64s1.73 0.37 2.18 0.64c0.37 0.22 0.6 0.36 1.15 0.36s0.78-0.13 1.15-0.36c0.45-0.27 1.07-0.64 2.18-0.64s1.73 0.37 2.18 0.64c0.37 0.22 0.6 0.36 1.15 0.36v2z"}),Object(r.jsx)("path",{d:"m21.97 11.234c-1.11 0-1.73-0.37-2.18-0.64-0.37-0.22-0.6-0.36-1.15-0.36-0.56 0-0.78 0.13-1.15 0.36-0.46 0.27-1.07 0.64-2.18 0.64s-1.73-0.37-2.18-0.64c-0.37-0.22-0.6-0.36-1.15-0.36-0.56 0-0.78 0.13-1.15 0.36-0.46 0.27-1.08 0.64-2.19 0.64s-1.73-0.37-2.18-0.64c-0.37-0.23-0.6-0.36-1.15-0.36s-0.78 0.13-1.15 0.36c-0.46 0.27-1.08 0.64-2.19 0.64v-2c0.56 0 0.78-0.13 1.15-0.36 0.46-0.27 1.08-0.64 2.19-0.64s1.73 0.37 2.18 0.64c0.37 0.23 0.59 0.36 1.15 0.36s0.78-0.13 1.15-0.36c0.46-0.27 1.08-0.64 2.19-0.64s1.73 0.37 2.18 0.64c0.37 0.22 0.6 0.36 1.15 0.36s0.78-0.13 1.15-0.36c0.45-0.27 1.07-0.64 2.18-0.64s1.73 0.37 2.18 0.64c0.37 0.23 0.59 0.36 1.15 0.36z"})]}))}},174:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var n={"Outdoor cool spaces":{value:"boroughdesignatedcoolspaces",showing:!0,about:"These locations have been designated as cool spaces where refuge can be sought during heatwaves."},"Indoor cool spaces":{value:"boroughdesignatedcoolspaces_indoor",showing:!0,about:"Source: Indoor cool spaces."},"Water courses":{value:"watercourses",showing:!0,about:"Water cools the air, so these places can be less hot."},"Tree canopy cover":{value:"treecanopy",showing:!0,about:"Indicative location of public open areas with potential for shading from trees."},"Cooler areas":{value:"avgLST_London_UrbanAtlas",showing:!0,about:"Modelled average land surface temperature - the more visible this layer's information is, the cooler the area is likely to be."}}},175:function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));a(0);var n=a(176),o=a.n(n),r=a(2),s=Object(r.jsx)(o.a,{children:"\n# About London\u2019s  Cool Spaces\n\nCool spaces are indoor or outdoor areas where Londoners can take respite on hot days. Cool space sites have been put forward by boroughs, community groups, faith based and other organisations following an  invitation to register process. The cool spaces are categorised by three tiers that can apply to indoor and outdoor spaces:\n\n* Tier 1 spaces have the greatest number of amenities that Londoners can expect from a cool space including access to toilets, free drinking water and full access to disabled persons.\n* Tier 2 spaces offer some of the amenities above, but not all. Tier 2 cool spaces still provide good cooling conditions and have the level of accessibility to disabled people clearly stated.\n* Tier 3 includes outdoor green and blue spaces which, although not offering the minimum amenities for tiers 1 and 2, provide suitable cooling conditions.\n\nThe tiered approach to classifying cool spaces is meant to provide Londoners with a better understanding of what can be expected from spaces and how certain spaces can better fit their needs. More information about cool spaces and the criteria for the different tiers can be found [here](https://www.london.gov.uk/sites/default/files/cool_spaces_phase_2_-_criteria_and_information.pdf).\n\nThe tree canopy layer intends to provide indicative information on potential shade in public open areas across London. These areas should not be confused with designated cool spaces and are not always suitable alternatives for them.\n\nWhen using London\u2019s parks and green spaces, please remember to [follow guidelines on social distancing](https://www.london.gov.uk/coronavirus/social-distancing-guidance/london-parks-and-green-spaces-covid-19-guidance).\n\nFor advice on staying safe in hot weather, read PHE guidance on [coping with heat and COVID-19](https://assets.publishing.service.gov.uk/government/uploads/system/uploads/attachment_data/file/980924/Beat-the-Heat_Leaflet_COVID-19_2021.pdf) and the Mayor\u2019s guidance on [keeping cool on hot days](https://www.london.gov.uk/what-we-do/environment/coping-hot-weather-london).\n\nData information and credits:\n\nThe cool spaces map uses data from the following sources:\n\n* Tree canopy cover: Data from [London Tree Canopy Cover](https://data.london.gov.uk/dataset/curio-canopy)\n* Surface temperature map: Data from [ARTi Analytics](https://data.london.gov.uk/dataset/major-summer-heatspots-using-landsat-8-thermal-satellite-data)\n* Basemap: Data from [Openstreetmap](https://osm.org), Cartography by [Maptiler](https://maptiler.com/)\n"})},177:function(e,t,a){"use strict";var n=a(13),o=a(0),r=a.n(o),s=a(74),c=a(97),i=a.n(c),l=a(98),d=a.n(l),u=a(99),b=a.n(u),j=a(100),p=a.n(j),h=a(101),f=a.n(h),g=a(122),O=a.n(g),m=a(123),x=a.n(m),v=a(196),y=a(36),w=a(37),k=a(38),C=a(26),T=a(30),_=a(121),S=a(71),N=a.n(S),L=a(130),W=a(2),B=Object(s.a)((function(e){return{root:{flexGrow:1},paper:{padding:e.spacing(2),textAlign:"center",color:e.palette.text.secondary},scrollGrid:{maxHeight:"20rem",overflowY:"scroll","*::-webkit-scrollbar":{"-webkit-appearance":"none",width:"7px"},"*::-webkit-scrollbar-thumb":{borderRadius:"4px",backgroundColor:"rgba(0, 0, 0, .5)","-webkit-box-shadow":"0 0 1px rgba(255, 255, 255, .5)"}},typography:{padding:e.spacing(2)}}}));t.a=function(e){var t=e.feature,a=B(),o=t.properties,s=o.cool_space_name,c=o.cs_address1,l=o.cs_address2,u=o.cs_postcode,j=o.opening_hour,h=o.accessible,g=o.toilets,m=o.free_water,S=o.shaded_well,E=o.about_shade,I=o.shade_seating,P=o.water_feature,F=o.seating_available,R=o.tier,A=r.a.useState(null),D=Object(n.a)(A,2),z=D[0],M=D[1],G=r.a.useState(null),q=Object(n.a)(G,2),J=q[0],H=q[1],V=Boolean(z),Z=V?"simple-popover":void 0;return t.hasOwnProperty("properties")&&Object(W.jsxs)("div",{className:a.root,children:[Object(W.jsx)(T.a,{variant:"h4",gutterBottom:!0,children:s}),Object(W.jsxs)(T.a,{variant:"h5",gutterBottom:!0,children:["Outdoor - ",R,Object(W.jsx)(N.a,{style:{height:"unset",float:"right"},onClick:function(e,t){switch(M(e.currentTarget),R){case"Tier 1":H("Tier 1: free public access, open 10-5 weekdays and weekends where possible, free drinking water, fully accessible, toilets, shaded seating, water features");break;case"Tier 2":H("Tier 2: free public access, open at specified times, specified accessibility, drinking water available on site or within walking distance, shaded seating");break;default:H("Tier 3: free public access to outdoor open space, some shade available")}},about:J}),Object(W.jsx)(L.a,{id:Z,open:V,anchorEl:z,onClose:function(){M(null)},anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},children:Object(W.jsx)(T.a,{className:a.typography,children:J})})]}),Object(W.jsx)(C.a,{container:!0,spacing:3,className:a.scrollGrid,children:Object(W.jsxs)(v.a,{dense:!0,children:[c&&u?Object(W.jsx)(C.a,{item:!0,xs:!0,children:Object(W.jsxs)(y.a,{children:[Object(W.jsx)(w.a,{children:Object(W.jsx)(i.a,{})}),Object(W.jsx)(k.a,{primary:c,secondary:(l&&u?l:"")+(l?u?" "+u:"":u||"")})]})}):null,j?Object(W.jsx)(C.a,{item:!0,xs:!0,children:Object(W.jsxs)(y.a,{children:[Object(W.jsx)(w.a,{children:Object(W.jsx)(d.a,{})}),Object(W.jsx)(k.a,{primary:j})]})}):null,h?Object(W.jsx)(C.a,{item:!0,xs:!0,children:Object(W.jsxs)(y.a,{children:[Object(W.jsx)(w.a,{children:Object(W.jsx)(b.a,{})}),Object(W.jsx)(k.a,{primary:"Accessible for "+typeof h==="object"?JSON.parse(h).reduce((function(e,t){return e+", "+t})):"People with disabilities; children; older people; pregnant women; people with underlying health issues"})]})}):null,g?Object(W.jsx)(C.a,{item:!0,xs:!0,children:Object(W.jsxs)(y.a,{children:[Object(W.jsx)(w.a,{children:Object(W.jsx)(p.a,{})}),Object(W.jsx)(k.a,{primary:g})]})}):null,m?Object(W.jsx)(C.a,{item:!0,xs:!0,children:Object(W.jsxs)(y.a,{children:[Object(W.jsx)(w.a,{children:Object(W.jsx)(f.a,{})}),Object(W.jsx)(k.a,{primary:"Free drinking water"})]})}):null,S&&E?Object(W.jsx)(C.a,{item:!0,xs:!0,children:Object(W.jsxs)(y.a,{children:[Object(W.jsx)(w.a,{children:Object(W.jsx)(O.a,{})}),Object(W.jsx)(k.a,{primary:E+(I?". There is also shaded seating":null)})]})}):null,P&&!["other","No","N/A"].includes(P)?Object(W.jsx)(C.a,{item:!0,xs:!0,children:Object(W.jsxs)(y.a,{children:[Object(W.jsx)(w.a,{children:Object(W.jsx)(_.a,{})}),Object(W.jsx)(k.a,{primary:P})]})}):null,F?Object(W.jsx)(C.a,{item:!0,xs:!0,children:Object(W.jsxs)(y.a,{children:[Object(W.jsx)(w.a,{children:Object(W.jsx)(x.a,{})}),Object(W.jsx)(k.a,{primary:"Seating is available"})]})}):null]})})]})}},178:function(e,t,a){"use strict";var n=a(13),o=a(0),r=a.n(o),s=a(74),c=a(97),i=a.n(c),l=a(98),d=a.n(l),u=a(99),b=a.n(u),j=a(100),p=a.n(j),h=a(101),f=a.n(h),g=a(196),O=a(36),m=a(37),x=a(38),v=a(26),y=a(30),w=(a(121),a(71)),k=a.n(w),C=a(130),T=a(2),_=Object(s.a)((function(e){return{root:{flexGrow:1},paper:{padding:e.spacing(2),textAlign:"center",color:e.palette.text.secondary},scrollGrid:{maxHeight:"20rem",overflowY:"scroll","*::-webkit-scrollbar":{"-webkit-appearance":"none",width:"7px"},"*::-webkit-scrollbar-thumb":{borderRadius:"4px",backgroundColor:"rgba(0, 0, 0, .5)","-webkit-box-shadow":"0 0 1px rgba(255, 255, 255, .5)"}},typography:{padding:e.spacing(2)}}}));t.a=function(e){var t=e.feature,a=_(),o=t.properties,s=o.cool_space_name,c=o.cs_address1,l=o.cs_address2,u=o.cs_postcode,j=o.opening_hour,h=o.accessible,w=o.toilets,S=o.free_water,N=(o["What is the indoor level of cooling provided in this space on a"],o["What are the cooling facilities available on site"],o.seating_available,o["Maximum seated capacity"],o["What is the site's maximum capacity at one time (including current social distancing measures) - indoor"],o.Tier),L=r.a.useState(null),W=Object(n.a)(L,2),B=W[0],E=W[1],I=r.a.useState(null),P=Object(n.a)(I,2),F=P[0],R=P[1],A=Boolean(B),D=A?"simple-popover":void 0;return t.hasOwnProperty("properties")&&Object(T.jsxs)("div",{className:a.root,children:[Object(T.jsx)(y.a,{variant:"h4",gutterBottom:!0,children:s}),Object(T.jsxs)(y.a,{variant:"h5",gutterBottom:!0,children:["Indoor - ",N,Object(T.jsx)(k.a,{style:{height:"unset",float:"right"},onClick:function(e,t){switch(E(e.currentTarget),N){case"Tier 1":R("Tier 1: free public access, open 10-5 weekdays and weekends where possible, free drinking water, fully accessible, toilets, shaded seating, water features");break;case"Tier 2":R("Tier 2: free public access, open at specified times, specified accessibility, drinking water available on site or within walking distance, shaded seating");break;default:R("Tier 3: free public access to outdoor open space, some shade available")}},about:F}),Object(T.jsx)(C.a,{id:D,open:A,anchorEl:B,onClose:function(){E(null)},anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},children:Object(T.jsx)(y.a,{className:a.typography,children:F})})]}),Object(T.jsx)(v.a,{container:!0,spacing:3,className:a.scrollGrid,children:Object(T.jsxs)(g.a,{dense:!0,children:[c&&u?Object(T.jsx)(v.a,{item:!0,xs:!0,children:Object(T.jsxs)(O.a,{children:[Object(T.jsx)(m.a,{children:Object(T.jsx)(i.a,{})}),Object(T.jsx)(x.a,{primary:c,secondary:(l&&u?l:"")+(l?u?" "+u:"":u||"")})]})}):null,j?Object(T.jsx)(v.a,{item:!0,xs:!0,children:Object(T.jsxs)(O.a,{children:[Object(T.jsx)(m.a,{children:Object(T.jsx)(d.a,{})}),Object(T.jsx)(x.a,{primary:j})]})}):null,h?Object(T.jsx)(v.a,{item:!0,xs:!0,children:Object(T.jsxs)(O.a,{children:[Object(T.jsx)(m.a,{children:Object(T.jsx)(b.a,{})}),Object(T.jsx)(x.a,{primary:"Accessible for "+typeof h==="object"?JSON.parse(h).reduce((function(e,t){return e+", "+t})):"People with disabilities; children; older people; pregnant women; people with underlying health issues"})]})}):null,w?Object(T.jsx)(v.a,{item:!0,xs:!0,children:Object(T.jsxs)(O.a,{children:[Object(T.jsx)(m.a,{children:Object(T.jsx)(p.a,{})}),Object(T.jsx)(x.a,{primary:w})]})}):null,S?Object(T.jsx)(v.a,{item:!0,xs:!0,children:Object(T.jsxs)(O.a,{children:[Object(T.jsx)(m.a,{children:Object(T.jsx)(f.a,{})}),Object(T.jsx)(x.a,{primary:"Free drinking water"})]})}):null]})})]})}},179:function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var n=a(16),o=a(34),r=a(74),s=window.innerWidth<600?document.querySelector("#root").offsetWidth:.378*document.querySelector("#root").offsetWidth,c=Object(r.a)((function(e){var t,a;return{root:{display:"flex"},appBar:(t={},Object(o.a)(t,e.breakpoints.up("sm"),{transition:e.transitions.create(["margin","width"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})}),Object(o.a)(t,e.breakpoints.down("sm"),{right:"calc(100% - 4em) !important",bottom:"0 !important",top:"unset !important"}),t),appBarShift:{width:"calc(100% - ".concat(s,"px)"),transition:e.transitions.create(["margin","width"],{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.enteringScreen}),marginRight:s},title:{flexGrow:1},hide:{display:"none !important"},drawer:Object(o.a)({},e.breakpoints.up("sm"),{width:s,flexShrink:0}),drawerPaper:(a={},Object(o.a)(a,e.breakpoints.up("sm"),{width:s}),Object(o.a)(a,e.breakpoints.down("sm"),{width:"100%"}),a),drawerHeader:Object(n.a)(Object(n.a)({display:"flex",alignItems:"center",padding:e.spacing(0,1)},e.mixins.toolbar),{},{justifyContent:"flex-start"}),content:{maxWidth:"100%",flexGrow:1,padding:e.spacing(3),transition:e.transitions.create("margin",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),marginRight:-s},contentShift:{transition:e.transitions.create("margin",{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.enteringScreen}),marginRight:0},formControl:{margin:e.spacing(1),width:"100%"},noLabel:{marginTop:e.spacing(3)}}}))},180:function(e,t,a){"use strict";a.d(t,"a",(function(){return v}));var n=a(13),o=a(34),r=a(16),s=a(0),c=a.n(s),i=a(82),l=a(105),d=a(353),u=a(197),b=a(354),j=a(355),p=a(71),h=a.n(p),f=a(30),g=a(130),O=a(74),m=a(2),x=Object(O.a)((function(e){return{typography:{padding:e.spacing(2)}}}));function v(e){var t=e.layers,a=e.setLayers,s=e.legend,p=x(),O=function(e){t[e.target.name].showing=e.target.checked,a(Object(r.a)(Object(r.a)({},t),{},Object(o.a)({},e.target.name,t[e.target.name])))},v=function(e,t,a){switch(e){case"Outdoor cool spaces":return"#9886CF";case"Indoor cool spaces":return"#333333";case"Cooler areas":return"rgba(0,255,255,0.9)";case"Water fountains":return"#43B7EF";default:return t?t.filter((function(t){return Object.keys(t)[0]===a[e].value}))[0][a[e].value]:""}},y=c.a.useState(null),w=Object(n.a)(y,2),k=w[0],C=w[1],T=c.a.useState(null),_=Object(n.a)(T,2),S=_[0],N=_[1],L=function(e,t){C(e.currentTarget),N(e.currentTarget.getAttribute("about"))},W=Boolean(k),B=W?"simple-popover":void 0;return s?Object(m.jsxs)(l.a,{component:"fieldset",children:[Object(m.jsx)(i.a,{component:"legend",children:"Choose map overlays to show"}),Object(m.jsx)(d.a,{children:Object.keys(t).map((function(e,a){return Object(m.jsxs)("div",{style:{display:"flex"},children:[Object(m.jsx)(u.a,{control:Object(m.jsx)(b.a,{color:"primary",style:{color:v(e,s,t),":checked":{color:"red"}},checked:t[e].showing,onChange:O,name:e},a),label:e},a),Object(m.jsx)(h.a,{style:{height:"unset"},onClick:L,about:t[e].about})]},a)}))}),Object(m.jsx)(g.a,{id:B,open:W,anchorEl:k,onClose:function(){C(null)},anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},children:Object(m.jsx)(f.a,{className:p.typography,children:S})})]}):Object(m.jsx)("div",{style:{textAlign:"center",margin:"0 auto"},children:Object(m.jsx)(j.a,{})})}},182:function(e,t,a){"use strict";a.d(t,"a",(function(){return p}));var n=a(16),o=a(13),r=a(0),s=a(48),c=a(74),i=a(105),l=a(133),d=a(365),u=a(2),b=Object(c.a)((function(e){return{formControl:{margin:e.spacing(1),minWidth:260},selectEmpty:{marginTop:e.spacing(2)}}})),j=[{title:"Drinking water",value:"free_water",filter:["==",["get","free_water"],"true"]},{title:"Seating",value:"seating_available",filter:["==",["get","seating_available"],"true"]},{title:"Water feature",value:"water_feature",filter:[">",["length",["get","shade_seating"]],0]},{title:"Access for people with disabilities",value:"people with disabilities",filter:["in","people with disabilities",["get","accessible"]]},{title:"Toilets",value:"toilets",filter:["in",["get","toilets"],"Toilets are available on site"]}];function p(e){var t=e.map,a=b(),c=Object(s.a)("facilities",[]),p=Object(o.a)(c,2),h=p[0],f=p[1];return Object(r.useEffect)((function(){!function(e,t){if(t.length>0){var a=t.map((function(e){return e.filter}));a.unshift("all"),e&&e.setFilter("boroughdesignatedcoolspaces",a),e&&e.setFilter("boroughdesignatedcoolspaces-glow",a)}else e&&e.setFilter("boroughdesignatedcoolspaces",null),e&&e.setFilter("boroughdesignatedcoolspaces-glow",null)}(t,h)}),[t,h]),Object(u.jsx)(i.a,{className:a.formControl,children:Object(u.jsx)(d.a,{multiple:!0,value:h,id:"facilities",onChange:function(e,t){f(t)},options:j,getOptionLabel:function(e){return e?e.title:""},renderInput:function(e){return Object(u.jsx)(l.a,Object(n.a)(Object(n.a)({},e),{},{label:"Choose facilities"}))}})})}},183:function(e,t,a){"use strict";a.d(t,"a",(function(){return y}));var n=a(124),o=a.n(n),r=a(184),s=a(13),c=a(16),i=a(0),l=a.n(i),d=a(74),u=a(133),b=a(356),j=a(105),p=a(82),h=a(368),f=a(197),g=a(369),O=a(366),m=a(2),x=Object(d.a)((function(e){return{root:{"& > *":{margin:e.spacing(1),display:"flex"}},snack:{width:"100%","& > * + *":{marginTop:e.spacing(2)}}}}));function v(e){return Object(m.jsx)(O.a,Object(c.a)({elevation:6,variant:"filled"},e))}function y(){var e=x(),t=l.a.useState(""),a=Object(s.a)(t,2),n=a[0],c=a[1],i=l.a.useState(""),d=Object(s.a)(i,2),O=d[0],y=d[1],w=l.a.useState(!1),k=Object(s.a)(w,2),C=k[0],T=k[1],_=l.a.useState(!1),S=Object(s.a)(_,2),N=S[0],L=S[1],W=function(){L(!0),c(""),y(""),T(!1)},B=function(e,t){"clickaway"!==t&&L(!1)};return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(g.a,{open:N,autoHideDuration:6e3,onClose:B,children:Object(m.jsx)(v,{onClose:B,severity:"success",children:"Thanks, your message has been sent to the team and a receipt emailed to the email contact provided."})}),Object(m.jsxs)(j.a,{component:"fieldset",fullWidth:!0,children:[Object(m.jsx)(p.a,{component:"legend",children:"We are keen to hear from users of the map as to what they found useful and any improvements we could make. Please leave your comments, suggestions or questions to the team below."}),Object(m.jsxs)("form",{onSubmit:function(e){e.preventDefault();var t={correspondent:e.target.email.value?e.target.email.value:"noreply@london.gov.uk",app:"cool-spaces-feedback",title:"cool-spaces feedback",message:e.target.feedback.value+". Permission to contact: "+e.target.permission.checked};function a(){return(a=Object(r.a)(o.a.mark((function e(t){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://apps.london.gov.uk/node-mailer/mail/send",t);case 2:return a=e.sent,e.next=5,a.text();case 5:e.sent.includes("Message accepted for delivery")?W():console.err("not sent");case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(e){a.apply(this,arguments)}({method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})},className:e.root,noValidate:!0,autoComplete:"on",children:[Object(m.jsx)(u.a,{required:!0,id:"email",label:"Your email",value:n,onChange:function(e){c(e.target.value)}}),Object(m.jsx)(u.a,{multiline:!0,rowsMax:20,required:!0,id:"feedback",label:"Your feedback",value:O,onChange:function(e){y(e.target.value)}}),Object(m.jsx)(f.a,{control:Object(m.jsx)(h.a,{checked:C,onChange:function(e){T(e.target.checked)},name:"permission",color:"secondary",id:"permission"}),label:"Tick here if you give us permission to email this contact"}),Object(m.jsx)(b.a,{variant:"contained",type:"submit",children:"Send"})]})]})]})}},193:function(e,t,a){"use strict";a.d(t,"a",(function(){return g}));var n=a(16),o=a(13),r=a(0),s=a(48),c=a(74),i=a(105),l=a(133),d=a(365),u=a(414),b=a(128),j=a(194);var p=a(92),h=a(2),f=Object(c.a)((function(e){return{formControl:{margin:e.spacing(1),minWidth:260},selectEmpty:{marginTop:e.spacing(2)}}}));function g(e){var t=e.map,a=Object(r.useState)(""),c=Object(o.a)(a,2),g=c[0],O=c[1],m=Object(s.a)("searchvalue",""),x=Object(o.a)(m,2),v=x[0],y=x[1],w=Object(r.useState)([]),k=Object(o.a)(w,2),C=k[0],T=k[1],_=Object(r.useState)(!1),S=Object(o.a)(_,2),N=S[0],L=S[1],W=Object(r.useState)(!1),B=Object(o.a)(W,2),E=B[0],I=B[1],P=f(),F=function(e,t){var a=Object(r.useState)(e),n=Object(o.a)(a,2),s=n[0],c=n[1];return Object(r.useEffect)((function(){var a=setTimeout((function(){c(e)}),t);return function(){clearTimeout(a)}}),[e]),s}(g,500),R=function(){t&&console.log(t.queryRenderedFeatures([t.project(t.getBounds().getSouthWest()),t.project(t.getBounds().getNorthEast())],{layers:["boroughdesignatedcoolspaces"]}).map((function(e){return e.properties.cool_space_name+" "+Math.round(1e3*Object(j.a)(Object(b.a)(e).geometry.coordinates,t.getCenter().toArray(),{units:"kilometers"}))})))};Object(r.useEffect)((function(){var e,t={id:"search",place_name:"Go to my location"};F?(L(!0),(e=F,fetch("https://api.mapbox.com/geocoding/v5/mapbox.places/".concat(e,".json?bbox=-0.489,51.28,0.236,51.686&access_token=").concat(p.b)).then((function(e){return e.json()})).then((function(t){return fetch("https://apps.london.gov.uk/cool-spaces-feature-geocoder/hello?name=".concat(e)).then((function(e){return e.json()})).then((function(e){return e.concat(t.features)}))})).catch((function(e){return console.error(e),[]}))).then((function(e){L(!1),e.unshift(t),T(e)}))):T([t])}),[F]);return Object(h.jsxs)(i.a,{className:P.formControl,children:[Object(h.jsx)(d.a,{id:"geocoder",options:C,groupBy:function(e){return e.id?"location":"cool space"},value:v,onInputChange:function(e){return e&&O(e.target.value)},onChange:function(e,a,n){return"clear"===n?(y(""),void t.getSource("single-point").setData({type:"Feature",geometry:{type:"Point",coordinates:[0,0]}})):function(e){if(e){y(e);var a,n,o,r=function(e,a,n){t&&(t.flyTo({center:[e,a],zoom:n,speed:2,curve:1,easing:function(e){return e}}),t.getSource("single-point").setData({type:"Feature",geometry:{type:"Point",coordinates:[e,a]}}))};if(e&&"Go to my location"===e.place_name)I(!0),navigator.geolocation.getCurrentPosition((function(e){a=e.coords.longitude,n=e.coords.latitude,o=14,I(!1),t.once("moveend",R),r(a,n,o)}));else{if(e.id)a=e.geometry.coordinates[0],n=e.geometry.coordinates[1];else{var s=Object(b.a)(e).geometry.coordinates;a=s[0],n=s[1],r(a,n,o)}r(a,n,o=14)}}}(a)},getOptionLabel:function(e){return e?e.place_name?e.place_name:e.properties.cool_space_name:""},getOptionSelected:function(e,t){return e.place_name?e.place_name===t.place_name:e.cool_space_name===t.cool_space_name},renderInput:function(e){return Object(h.jsx)(l.a,Object(n.a)(Object(n.a)({},e),{},{label:"Search a place name or address/postcode"}))}}),E||N?Object(h.jsx)(u.a,{}):""]})}},233:function(e,t,a){},349:function(e,t,a){"use strict";a.r(t);var n=a(172),o=a(173),r=a(191),s=a(190),c=a(0),i=a.n(c),l=a(12),d=a.n(l),u=a(188),b=a(18),j=a(189),p=(a(233),a(92));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var h=a(2);i.a.Component;d.a.render(Object(h.jsx)(u.a,{children:Object(h.jsx)(j.a,{ReactRouterRoute:b.a,children:Object(h.jsx)(p.a,{})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},48:function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));var n=a(13),o=a(0),r=a.n(o);function s(e,t){var a=r.a.useState((function(){var a=localStorage.getItem(e);return a?JSON.parse(a):t})),o=Object(n.a)(a,2),s=o[0],c=o[1];return r.a.useEffect((function(){window.localStorage.setItem(e,JSON.stringify(s))}),[s,e]),[s,c]}},92:function(e,t,a){"use strict";(function(e){a.d(t,"b",(function(){return Z})),a.d(t,"a",(function(){return X}));var n=a(16),o=a(192),r=a(34),s=a(13),c=a(0),i=a(104),l=a.n(i),d=(a(235),a(12)),u=a.n(d),b=a(174),j=a(175),p=a(177),h=a(178),f=a(179),g=a(48),O=a(4),m=a(132),x=a(364),v=a(358),y=a(359),w=a(360),k=a(30),C=a(198),T=a(185),_=a.n(T),S=a(187),N=a.n(S),L=a(186),W=a.n(L),B=a(363),E=a(83),I=a(362),P=a(131),F=a(105),R=a(82),A=a(357),D=a(180),z=a(193),M=a(182),G=a(183),q=a(21),J=a(125),H=a(2),V=e.browser&&/iPad|iPhone|iPod/.test(navigator.userAgent),Z="pk.eyJ1IjoiZ2xhLWdpcyIsImEiOiJjanBvNGh1bncwOTkzNDNueWt5MGU1ZGtiIn0.XFxLdq2dXttcXSXTiREPTA";function X(e){e.showBorder,e.onTilesLoad;var t=Object(q.a)(),a=Object(A.a)(t.breakpoints.down("sm")),i=Object(f.a)(t),d=Object(c.useRef)(null);J.StylesManager.applyTheme("bootstrap");var T=Object(c.useState)(b.a),S=Object(s.a)(T,2),L=S[0],Z=S[1],X=Object(c.useState)(null),Y=Object(s.a)(X,2),U=Y[0],$=Y[1],K=Object(g.a)("drawer",!0),Q=Object(s.a)(K,2),ee=Q[0],te=Q[1],ae=function(){te(!0),setTimeout((function(){fe&&fe.resize(),a?fe.easeTo({padding:{bottom:150,top:0},duration:1e3}):fe.easeTo({padding:{right:150,left:0},duration:1e3})}),10)},ne=function(e){console.log(e,"opened")},oe=function(e){var t=e.bottom;return Object(H.jsx)(v.a,{position:a?"absolute":"fixed",style:{backgroundColor:"unset",visibility:"hidden",bottom:t},className:Object(O.a)(i.appBar,Object(r.a)({},i.appBarShift,ee)),children:Object(H.jsxs)(y.a,{children:[Object(H.jsx)(k.a,{variant:"h6",noWrap:!0,className:i.title}),Object(H.jsx)(m.a,{color:"inherit","aria-label":"open drawer",edge:"end",onClick:ae,className:Object(O.a)(ee&&i.hide),style:{visibility:"visible"},children:Object(H.jsx)(_.a,{})})]})})},re=function(e){var t=e.children,a=e.value,r=e.index,s=Object(o.a)(e,["children","value","index"]);return Object(H.jsx)("div",Object(n.a)(Object(n.a)({role:"tabpanel",hidden:a!==r,id:"simple-tabpanel-".concat(r),"aria-labelledby":"scrollable-force-tab-".concat(r)},s),{},{children:a===r&&Object(H.jsx)(I.a,{p:3,children:t})}))},se=function(e){return{id:"scrollable-force-tab-".concat(e),"aria-controls":"scrollable-force-tabpanel-".concat(e)}},ce=Object(g.a)("tab",0),ie=Object(s.a)(ce,2),le=ie[0],de=ie[1],ue=function(e,t){de(Number(t))},be=function(){return Object(H.jsx)(P.a,{square:!0,children:Object(H.jsxs)(B.a,{value:le,onChange:ue,variant:"scrollable",scrollButtons:"auto","aria-label":"scrollable force tabs",children:[Object(H.jsx)(E.a,Object(n.a)({label:"Layers"},se(0))),Object(H.jsx)(E.a,Object(n.a)({label:"Find a cool space"},se(1))),Object(H.jsx)(E.a,Object(n.a)({label:"Feedback"},se(2))),Object(H.jsx)(E.a,Object(n.a)({label:"Register a cool space"},se(3))),Object(H.jsx)(E.a,Object(n.a)({label:"About"},se(4)))]})})},je=Object(c.useRef)(null),pe=Object(c.useState)(null),he=Object(s.a)(pe,2),fe=he[0],ge=he[1],Oe=Object(c.useRef)(new l.a.Popup({offset:5,closeButton:!1})),me=Object(g.a)("lng",-.1),xe=Object(s.a)(me,2),ve=xe[0],ye=xe[1],we=Object(g.a)("lat",51.49),ke=Object(s.a)(we,2),Ce=ke[0],Te=ke[1],_e=Object(g.a)("zoom",9),Se=Object(s.a)(_e,2),Ne=Se[0],Le=Se[1];Object(c.useEffect)((function(){L&&fe&&Object.keys(L).map((function(e){return fe.getStyle().layers.map((function(e){return e.id})).filter((function(t){return t.startsWith(L[e].value)})).map((function(t){return fe.setLayoutProperty(t,"visibility",L[e].showing?"visible":"none")}))}))}),[L,fe]),Object(c.useEffect)((function(){var e=new l.a.Map({container:je.current,style:"cool_spaces.json",center:[ve,Ce],zoom:Ne,pitch:10});return e.touchZoomRotate.disableRotation(),e.addControl(new l.a.NavigationControl({showCompass:!1,showZoom:!0}),"top-left"),e.on("load",(function(){$(e.getStyle().layers.filter((function(e){return Object.values(L).map((function(e){return e.value})).includes(e.id)})).map((function(e){return[e.id,e.paint]})).map((function(e){var t={};return t[e[0]]=e[1][Object.keys(e[1]).filter((function(e){return e.includes("color")}))[0]],t}))),e.on("mouseenter","boroughdesignatedcoolspaces",(function(t){e.getCanvas().style.cursor="pointer"})),e.on("mouseleave","boroughdesignatedcoolspaces",(function(t){e.getCanvas().style.cursor=""})),e.on("click","boroughdesignatedcoolspaces",(function(t){var a=e.queryRenderedFeatures(t.point);if(a.length&&Object.values(L).map((function(e){return e.value})).includes(a.filter((function(e){return"boroughdesignatedcoolspaces"===e.layer.id}))[0].sourceLayer)){var n=a.filter((function(e){return"boroughdesignatedcoolspaces"===e.layer.id}))[0],o=document.createElement("div");u.a.render(Object(H.jsx)(p.a,{feature:n}),o),Oe.current.setLngLat(t.lngLat).setDOMContent(o).addTo(e)}else Oe.current.remove()})),e.on("click","boroughdesignatedcoolspaces_indoor",(function(t){var a=e.queryRenderedFeatures(t.point);if(a.length&&Object.values(L).map((function(e){return e.value})).includes(a.filter((function(e){return"boroughdesignatedcoolspaces_indoor"===e.layer.id}))[0].layer.id)){var n=a.filter((function(e){return"boroughdesignatedcoolspaces_indoor"===e.layer.id}))[0],o=document.createElement("div");u.a.render(Object(H.jsx)(h.a,{feature:n}),o),Oe.current.setLngLat(t.lngLat).setDOMContent(o).addTo(e)}else Oe.current.remove()})),e.keyboard.disable(),e.on("moveend",(function(){var t=e.getCenter(),a=t.lng,n=t.lat,o=e.getZoom();ye(a),Te(n),Le(o)})),e.addSource("single-point",{type:"geojson",data:{type:"FeatureCollection",features:[]}}),e.addLayer({visible:!0,id:"point",source:"single-point",type:"circle",paint:{"circle-radius":10,"circle-color":"#00e48e"}}),ge(e)})),function(){return e.remove()}}),[]);return Object(c.useEffect)((function(){return function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:17;fe&&fe.flyTo({center:[e,t],zoom:a,speed:2,curve:1,easing:function(e){return e}})}(ve,Ce,Ne)}),[ve,Ce,Ne]),Object(H.jsxs)("div",{ref:d,className:i.root,children:[Object(H.jsx)(w.a,{}),!a&&Object(H.jsx)(oe,{left:a?0:"auto"}),Object(H.jsxs)("main",{className:Object(O.a)(i.content,Object(r.a)({},i.contentShift,ee)),children:[Object(H.jsx)("div",{className:i.drawerHeader}),Object(H.jsx)("div",{children:Object(H.jsx)("div",{ref:je,style:{position:"absolute",top:0,left:0,height:"100%",width:"100%"}})})]}),Object(H.jsxs)(x.a,{disableBackdropTransition:!V,disableDiscovery:V,className:i.drawer,variant:"persistent",anchor:a?"bottom":"right",open:ee,onOpen:ne,onClose:ne,classes:{paper:i.drawerPaper},children:[Object(H.jsxs)("div",{className:i.drawerHeader,children:[Object(H.jsx)(m.a,{onClick:function(){te(!1),setTimeout((function(){fe&&fe.resize(),a?fe.easeTo({padding:{top:150,bottom:0},duration:1e3}):fe.easeTo({padding:{left:150,right:0},duration:1e3})}),10)},children:a?Object(H.jsx)(W.a,{}):Object(H.jsx)(N.a,{})}),Object(H.jsx)("h3",{style:{textAlign:"center",margin:"0 auto"},children:"LONDON COOL SPACES"})," "]}),Object(H.jsx)(C.a,{}),!a&&Object(H.jsx)(be,{}),Object(H.jsx)(re,{value:le,index:0,children:Object(H.jsxs)("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center"},children:[Object(H.jsx)(D.a,{layers:L,setLayers:Z,legend:U}),Object(H.jsxs)(R.a,{component:"legend",children:[Object(H.jsxs)("p",{children:["To search for cool spaces in a specific location or near you, please go to"," ",Object(H.jsxs)("button",{onClick:function(){return de(1)},children:[Object(H.jsx)("span",{style:{fontVariant:"small-caps"},children:"find a cool space"})," "]})]}),Object(H.jsxs)("p",{children:["More information about cool spaces tiers and the sources of data for the different layers on the map can be found in"," ",Object(H.jsx)("button",{onClick:function(){return de(4)},children:Object(H.jsx)("span",{style:{fontVariant:"small-caps"},children:"about"})})]}),Object(H.jsxs)("p",{children:["We are still accepting new registrations of indoor and outdoor cool spaces. If you would like to register a site please complete the form in"," ",Object(H.jsxs)("button",{onClick:function(){return de(3)},children:[Object(H.jsx)("span",{style:{fontVariant:"small-caps"},children:"register a cool space"})," "]})]})]})]})}),Object(H.jsx)(re,{value:le,index:1,children:Object(H.jsxs)("div",{style:{display:"flex",flexDirection:"column",justifyContent:"center"},children:[Object(H.jsxs)(F.a,{component:"fieldset",fullWidth:!0,children:[Object(H.jsx)(R.a,{component:"legend",children:"Filter cool spaces by facilities and find a location by search or your device position."}),Object(H.jsx)(M.a,{map:fe}),Object(H.jsx)(z.a,{map:fe})]}),Object(H.jsxs)(R.a,{component:"legend",children:["To choose what map features to view, please select from"," ",Object(H.jsx)("button",{onClick:function(){return de(0)},children:Object(H.jsx)("span",{style:{fontVariant:"small-caps"},children:"layers"})})," "]})]})}),Object(H.jsx)(re,{value:le,index:2,children:Object(H.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:Object(H.jsx)(G.a,{})})}),Object(H.jsx)(re,{value:le,index:3,children:Object(H.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:Object(H.jsx)(J.Survey,{json:{surveyId:"e5d72f1d-01a7-4894-9d8e-44ee9c52af4e",surveyPostId:"82a2ba1b-e580-4034-88f5-f2b3975b1c87"}})})}),Object(H.jsx)(re,{value:le,index:4,children:Object(H.jsx)("div",{style:{display:"flex",justifyContent:"center"},children:Object(H.jsx)(k.a,{variant:"body2",className:i.typography,children:j.a})})}),a&&Object(H.jsx)(C.a,{}),a&&Object(H.jsx)(be,{})]}),a&&Object(H.jsx)("div",{style:{bottom:0},children:Object(H.jsx)(oe,{})})]})}}).call(this,a(234))}},[[349,1,2]]]);
//# sourceMappingURL=main.b481e12a.chunk.js.map