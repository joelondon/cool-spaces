{"version":3,"sources":["mapLayers.js","mapAbout.js","components/TooltipIndoor.js","components/TooltipHover.js","styles.jsx","components/SwitchesGroup.js","components/Facilities.js","components/Feedback.js","components/WaterFeatureIcon.js","components/Tooltip.js","components/Geocoder.js","hooks/useDebounce.js","serviceWorker.js","index.js","hooks/usePersistedState.js","App.js"],"names":["mapLayers","value","showing","about","mapAbout","useStyles","makeStyles","theme","root","flexGrow","paper","padding","spacing","textAlign","color","palette","text","secondary","scrollGrid","maxHeight","overflowY","width","borderRadius","backgroundColor","typography","TooltipIndoor","feature","classes","properties","cool_space_name","cs_address1","cs_address2","cs_postcode","opening_hour","accessible","toilets","free_water","cooling_facilities","capacity_max","seating_available","tier","React","useState","anchorEl","setAnchorEl","aboutText","setAboutText","open","Boolean","id","undefined","hasOwnProperty","className","variant","gutterBottom","style","height","float","onClick","event","el","currentTarget","onClose","anchorOrigin","vertical","horizontal","transformOrigin","container","dense","item","xs","primary","JSON","parse","reduce","acc","curr","TooltipHover","drawerWidth","window","innerWidth","document","querySelector","offsetWidth","display","appBar","breakpoints","up","transition","transitions","create","easing","sharp","duration","leavingScreen","down","right","bottom","top","appBarShift","easeOut","enteringScreen","marginRight","title","hide","drawer","flexShrink","drawerPaper","drawerHeader","alignItems","mixins","toolbar","justifyContent","content","maxWidth","contentShift","formControl","margin","noLabel","marginTop","SwitchesGroup","props","layers","setLayers","legend","handleChange","target","name","checked","legendColour","filter","key","Object","keys","handleInfoClick","getAttribute","component","map","i","control","onChange","label","minWidth","selectEmpty","options","Facilities","usePersistedState","setValue","useEffect","newValue","length","unshift","setFilter","filterMap","multiple","getOptionLabel","option","renderInput","params","snack","Alert","elevation","Feedback","email","setEmail","feedback","setFeedback","setChecked","snackOpen","setSnackOpen","openSnackBar","closeSnackBar","reason","autoHideDuration","severity","fullWidth","onSubmit","preventDefault","data","correspondent","app","message","permission","requestOptions","a","fetch","response","includes","console","err","asyncFetch","method","headers","body","stringify","noValidate","autoComplete","required","multiline","rowsMax","type","WaterFeatureIcon","SvgIcon","d","Tooltip","shaded_well","about_shade","shade_seating","water_feature","Typography","Popover","Grid","List","ListItem","ListItemIcon","ListItemText","Geocoder","searchTerm","setSearchTerm","results","setResults","isSearching","setIsSearching","isLocating","setIsLocating","debouncedSearchTerm","delay","debouncedValue","setDebouncedValue","handler","setTimeout","clearTimeout","useDebounce","moveHandler","log","queryRenderedFeatures","project","getBounds","getSouthWest","getNorthEast","Math","round","distance","centroid","geometry","coordinates","getCenter","toArray","units","search","currentLocation","place_name","MAPBOX_TOKEN","then","r","json","r2","concat","features","catch","error","FormControl","Autocomplete","groupBy","onInputChange","e","selection","getSource","setData","lng","lat","zoom","fly","flyTo","center","speed","curve","t","navigator","geolocation","getCurrentPosition","position","coords","longitude","latitude","once","centre","forwardGeocode","getOptionSelected","TextField","LinearProgress","location","hostname","match","Component","ReactDOM","render","ReactRouterRoute","Route","App","getElementById","serviceWorker","ready","registration","unregister","defaultValue","persistedState","localStorage","getItem","state","setState","setItem","iOS","process","browser","test","userAgent","showBorder","onTilesLoad","useTheme","smallScreen","useMediaQuery","ref","useRef","Survey","applyTheme","setLegend","drawerOpen","setDrawerOpen","handleDrawerOpen","resize","easeTo","left","drawerOpened","MenuButton","visibility","clsx","noWrap","aria-label","edge","TabPanel","children","index","other","role","hidden","aria-labelledby","p","tabsProps","tabValue","setTabValue","tabChange","Number","TabsContent","square","scrollButtons","mapContainerRef","setMap","tooltipRef","mapboxgl","Popup","offset","closeButton","tooltipHoverRef","setLng","setLat","setZoom","getStyle","elfilter","startsWith","innerel","setLayoutProperty","Map","current","pitch","touchZoomRotate","disableRotation","addControl","NavigationControl","showCompass","showZoom","on","values","paint","ret","getCanvas","cursor","point","layer","tooltipNode","createElement","setLngLat","lngLat","setDOMContent","addTo","remove","sourceLayer","keyboard","disable","getZoom","addSource","addLayer","visible","source","gotoLocation","disableBackdropTransition","disableDiscovery","anchor","onOpen","flexDirection","fontVariant","surveyId","surveyPostId"],"mappings":"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","file":"static/js/main.c4ab958d.chunk.js","sourcesContent":["export const mapLayers = {\n  'Outdoor cool spaces': {\n    value: 'boroughdesignatedcoolspaces',\n    showing: true,\n    about:\n      'These locations have been designated as cool spaces where refuge can be sought during heatwaves.'\n  },\n  'Indoor cool spaces': {\n    value: 'boroughdesignatedcoolspaces_indoor',\n    showing: true,\n    about: 'Source: Indoor cool spaces.'\n  },\n  'Water fountains': {\n    value: 'findafountain',\n    showing: true,\n    about: 'Source: find a fountain.'\n  },\n  'Water courses': {\n    value: 'watercourses',\n    showing: true,\n    about: 'Water cools the air, so these places can be less hot.'\n  },\n  'Tree canopy cover': {\n    value: 'treecanopy',\n    showing: true,\n    about:\n      'Indicative location of public open areas with potential for shading from trees.'\n  },\n  'Cooler areas': {\n    value: 'avgLST_London_UrbanAtlas',\n    showing: true,\n    about:\n      \"Modelled average land surface temperature - the more visible this layer's information is, the cooler the area is likely to be.\"\n  }\n}\n","import React from 'react'\nimport ReactMarkdown from 'react-markdown'\n\nconst markdown = `\n# About London’s  Cool Spaces\n\nCool spaces are indoor or outdoor areas where Londoners can take respite on hot days. Cool space sites have been put forward by boroughs, community groups, faith based and other organisations following an  invitation to register process. The cool spaces are categorised by three tiers that can apply to indoor and outdoor spaces:\n\n* Tier 1 spaces have the greatest number of amenities that Londoners can expect from a cool space including access to toilets, free drinking water and full access to disabled persons.\n* Tier 2 spaces offer some of the amenities above, but not all. Tier 2 cool spaces still provide good cooling conditions and have the level of accessibility to disabled people clearly stated.\n* Tier 3 includes outdoor green and blue spaces which, although not offering the minimum amenities for tiers 1 and 2, provide suitable cooling conditions.\n\nThe tiered approach to classifying cool spaces is meant to provide Londoners with a better understanding of what can be expected from spaces and how certain spaces can better fit their needs. More information about cool spaces and the criteria for the different tiers can be found [here](https://www.london.gov.uk/sites/default/files/cool_spaces_phase_2_-_criteria_and_information.pdf).\n\nThe tree canopy layer intends to provide indicative information on potential shade in public open areas across London. These areas should not be confused with designated cool spaces and are not always suitable alternatives for them.\n\nWhen using cool spaces please continue to [follow government guidance](https://www.london.gov.uk/coronavirus/coronavirus-what-you-need-know) to keep yourself and others safe.\n\nFor advice on staying safe in hot weather, read the Mayor’s guidance on [keeping cool on hot days](https://www.london.gov.uk/what-we-do/environment/coping-hot-weather-london).\n\nData information and credits:\n\nThe cool spaces map uses data from the following sources:\n\n* Tree canopy cover: Data from [London Tree Canopy Cover](https://data.london.gov.uk/dataset/curio-canopy)\n* Water fountains: Data from [Refill London](https://www.london.gov.uk/what-we-do/environment/waste-and-recycling/single-use-plastic-bottles/drinking-fountains-london)\n* Surface temperature map: Data from [ARTi Analytics](https://data.london.gov.uk/dataset/major-summer-heatspots-using-landsat-8-thermal-satellite-data)\n* Basemap: Data from [Openstreetmap](https://osm.org), Cartography by [Maptiler](https://maptiler.com/)\n`\nexport const mapAbout = <ReactMarkdown>{markdown}</ReactMarkdown>\n","import React from 'react'\nimport { makeStyles } from '@material-ui/core/styles'\nimport PinDropIcon from '@material-ui/icons/PinDrop'\nimport AccessTimeIcon from '@material-ui/icons/AccessTime'\nimport AccessibilityNewIcon from '@material-ui/icons/AccessibilityNew'\nimport WcIcon from '@material-ui/icons/Wc'\nimport LocalDrinkIcon from '@material-ui/icons/LocalDrink'\nimport AcUnitIcon from '@material-ui/icons/AcUnit'\nimport GroupIcon from '@material-ui/icons/Group'\nimport List from '@material-ui/core/List'\nimport ListItem from '@material-ui/core/ListItem'\nimport ListItemIcon from '@material-ui/core/ListItemIcon'\nimport ListItemText from '@material-ui/core/ListItemText'\nimport Grid from '@material-ui/core/Grid'\nimport Typography from '@material-ui/core/Typography'\nimport InfoOutlinedIcon from '@material-ui/icons/InfoOutlined'\nimport Popover from '@material-ui/core/Popover'\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    flexGrow: 1\n  },\n  paper: {\n    padding: theme.spacing(2),\n    textAlign: 'center',\n    color: theme.palette.text.secondary\n  },\n  scrollGrid: {\n    maxHeight: '20rem',\n    overflowY: 'scroll',\n    '*::-webkit-scrollbar': {\n      '-webkit-appearance': 'none',\n      width: '7px'\n    },\n    '*::-webkit-scrollbar-thumb': {\n      borderRadius: '4px',\n      backgroundColor: 'rgba(0, 0, 0, .5)',\n      '-webkit-box-shadow': '0 0 1px rgba(255, 255, 255, .5)'\n    }\n  },\n  typography: {\n    padding: theme.spacing(2)\n  }\n}))\n\nconst TooltipIndoor = ({ feature }) => {\n  const classes = useStyles()\n  const {\n    cool_space_name,\n    cs_address1,\n    cs_address2,\n    cs_postcode,\n    opening_hour,\n    accessible,\n    toilets,\n    free_water,\n    'What is the indoor level of cooling provided in this space on a': cooling_level,\n    'What are the cooling facilities available on site': cooling_facilities,\n    seating_available,\n    'Maximum seated capacity': seating_max,\n    \"What is the site's maximum capacity at one time (including current social distancing measures) - indoor\": capacity_max,\n    tier\n  } = feature.properties\n\n  const [anchorEl, setAnchorEl] = React.useState(null)\n  const [aboutText, setAboutText] = React.useState(null)\n\n  const handleInfoClick = (event, el) => {\n    setAnchorEl(event.currentTarget)\n    switch (tier) {\n      case 'Tier 1':\n        setAboutText(\n          'Tier 1: free public access, open 10-5 weekdays and weekends where possible, free drinking water, fully accessible, toilets, shaded seating, water features'\n        )\n        break\n      case 'Tier 2':\n        setAboutText(\n          'Tier 2: free public access, open at specified times, specified accessibility, drinking water available on site or within walking distance, shaded seating'\n        )\n        break\n      default:\n        setAboutText(\n          'Tier 3: free public access to outdoor open space, some shade available'\n        )\n        break\n    }\n  }\n\n  const handleInfoClose = () => {\n    setAnchorEl(null)\n  }\n\n  const open = Boolean(anchorEl)\n  const id = open ? 'simple-popover' : undefined\n\n  return (\n    feature.hasOwnProperty('properties') && (\n      <div className={classes.root}>\n        {/*Object.entries(feature.properties).reduce(\n        (acc, curr) => (\n          <div>\n            {acc}\n            {curr[0]} : {curr[1]}\n          </div>\n        ),\n        ''\n      )*/}\n        <Typography variant=\"h4\" gutterBottom>\n          {cool_space_name}\n        </Typography>\n        <Typography variant=\"h5\" gutterBottom>\n          Indoor - {tier}\n          <InfoOutlinedIcon\n            style={{ height: 'unset', float: 'right' }}\n            onClick={handleInfoClick}\n            about={aboutText}\n          />\n          <Popover\n            id={id}\n            open={open}\n            anchorEl={anchorEl}\n            onClose={handleInfoClose}\n            anchorOrigin={{\n              vertical: 'bottom',\n              horizontal: 'center'\n            }}\n            transformOrigin={{\n              vertical: 'top',\n              horizontal: 'center'\n            }}\n          >\n            <Typography className={classes.typography}>{aboutText}</Typography>\n          </Popover>\n        </Typography>\n\n        <Grid container spacing={3} className={classes.scrollGrid}>\n          <List dense={true}>\n            {cs_address1 && cs_postcode ? (\n              <Grid item xs>\n                <ListItem>\n                  <ListItemIcon>\n                    <PinDropIcon />\n                  </ListItemIcon>\n                  <ListItemText\n                    primary={cs_address1}\n                    secondary={\n                      (cs_address2 && cs_postcode ? cs_address2 : '') +\n                      (cs_address2\n                        ? cs_postcode\n                          ? ' ' + cs_postcode\n                          : ''\n                        : cs_postcode\n                        ? cs_postcode\n                        : '')\n                    }\n                  />\n                </ListItem>\n              </Grid>\n            ) : null}\n\n            {opening_hour ? (\n              <Grid item xs>\n                <ListItem>\n                  <ListItemIcon>\n                    <AccessTimeIcon />\n                  </ListItemIcon>\n                  <ListItemText primary={opening_hour} />\n                </ListItem>\n              </Grid>\n            ) : null}\n            {accessible ? (\n              <Grid item xs>\n                <ListItem>\n                  <ListItemIcon>\n                    <AccessibilityNewIcon />\n                  </ListItemIcon>\n                  <ListItemText\n                    primary={\n                      'Accessible for ' + typeof accessible === 'object'\n                        ? JSON.parse(accessible).reduce(\n                            (acc, curr) => acc + `, ` + curr\n                          )\n                        : 'Accessible for People with disabilities; children; older people; pregnant women; people with underlying health issues'\n                    }\n                  />\n                </ListItem>\n              </Grid>\n            ) : null}\n            {toilets ? (\n              <Grid item xs>\n                <ListItem>\n                  <ListItemIcon>\n                    <WcIcon />\n                  </ListItemIcon>\n                  <ListItemText primary={toilets} />\n                </ListItem>\n              </Grid>\n            ) : null}\n            {free_water ? (\n              <Grid item xs>\n                <ListItem>\n                  <ListItemIcon>\n                    <LocalDrinkIcon />\n                  </ListItemIcon>\n                  <ListItemText primary=\"Free drinking water\" />\n                  {/*water_nearby ? water_nearby : ''*/}\n                </ListItem>\n              </Grid>\n            ) : null}\n            {cooling_facilities ? (\n              <Grid item xs>\n                <ListItem>\n                  <ListItemIcon>\n                    <AcUnitIcon />\n                  </ListItemIcon>\n                  <ListItemText\n                    primary={\n                      // 'Accessible for ' + typeof cooling_facilities === 'object'\n                      JSON.parse(cooling_facilities).reduce(\n                        (acc, curr) => acc + `, ` + curr\n                      )\n                      // : 'Accessible for People with disabilities; children; older people; pregnant women; people with underlying health issues'\n                    }\n                  />\n                </ListItem>\n              </Grid>\n            ) : null}\n            {capacity_max ? (\n              <Grid item xs>\n                <ListItem>\n                  <ListItemIcon>\n                    <GroupIcon />\n                  </ListItemIcon>\n                  <ListItemText primary={`${capacity_max} capacity`} />\n                </ListItem>\n              </Grid>\n            ) : null}\n          </List>\n        </Grid>\n      </div>\n    )\n  )\n}\n\nexport default TooltipIndoor\n","import React from 'react'\n\nconst TooltipHover = ({ feature }) => {\n  return (\n    <div>\n      {feature.properties.cool_space_name\n        ? feature.properties.cool_space_name\n        : ''}\n    </div>\n  )\n}\n\nexport default TooltipHover\n","import { makeStyles } from '@material-ui/core/styles'\n\nexport const drawerWidth =\n  window.innerWidth < 600\n    ? document.querySelector('#root').offsetWidth\n    : document.querySelector('#root').offsetWidth * 0.378\n\nexport const useStyles = makeStyles(theme => ({\n  root: {\n    display: 'flex'\n  },\n\n  appBar: {\n    [theme.breakpoints.up('sm')]: {\n      transition: theme.transitions.create(['margin', 'width'], {\n        easing: theme.transitions.easing.sharp,\n        duration: theme.transitions.duration.leavingScreen\n      })\n    },\n    [theme.breakpoints.down('sm')]: {\n      right: `calc(100% - 4em) !important`,\n      bottom: `0 !important`,\n      top: `unset !important`\n    }\n  },\n  appBarShift: {\n    width: `calc(100% - ${drawerWidth}px)`,\n    transition: theme.transitions.create(['margin', 'width'], {\n      easing: theme.transitions.easing.easeOut,\n      duration: theme.transitions.duration.enteringScreen\n    }),\n    marginRight: drawerWidth\n  },\n  title: {\n    flexGrow: 1\n  },\n  hide: {\n    display: 'none !important'\n  },\n  drawer: {\n    [theme.breakpoints.up('sm')]: { width: drawerWidth, flexShrink: 0 }\n  },\n  drawerPaper: {\n    [theme.breakpoints.up('sm')]: {\n      width: drawerWidth\n    },\n    [theme.breakpoints.down('sm')]: {\n      width: '100%'\n      // height: `${windowHeight * 1.618 - windowHeight}px !important`\n    }\n  },\n  drawerHeader: {\n    display: 'flex',\n    alignItems: 'center',\n    padding: theme.spacing(0, 1),\n    // necessary for content to be below app bar\n    ...theme.mixins.toolbar,\n    justifyContent: 'flex-start'\n  },\n  content: {\n    maxWidth: '100%',\n    flexGrow: 1,\n    padding: theme.spacing(3),\n    transition: theme.transitions.create('margin', {\n      easing: theme.transitions.easing.sharp,\n      duration: theme.transitions.duration.leavingScreen\n    }),\n    marginRight: -drawerWidth\n  },\n  contentShift: {\n    transition: theme.transitions.create('margin', {\n      easing: theme.transitions.easing.easeOut,\n      duration: theme.transitions.duration.enteringScreen\n    }),\n    marginRight: 0\n  },\n  formControl: {\n    margin: theme.spacing(1),\n    width: '100%'\n  },\n  noLabel: {\n    marginTop: theme.spacing(3)\n  }\n}))\n","import React from 'react'\nimport FormLabel from '@material-ui/core/FormLabel'\nimport FormControl from '@material-ui/core/FormControl'\nimport FormGroup from '@material-ui/core/FormGroup'\nimport FormControlLabel from '@material-ui/core/FormControlLabel'\nimport Switch from '@material-ui/core/Switch'\nimport CircularProgress from '@material-ui/core/CircularProgress'\nimport InfoOutlinedIcon from '@material-ui/icons/InfoOutlined'\nimport Typography from '@material-ui/core/Typography'\nimport Popover from '@material-ui/core/Popover'\nimport { makeStyles } from '@material-ui/core/styles'\n\nconst useStyles = makeStyles(theme => ({\n  typography: {\n    padding: theme.spacing(2)\n  }\n}))\n\nexport default function SwitchesGroup(props) {\n  const { layers, setLayers, legend } = props\n  const classes = useStyles()\n\n  const handleChange = event => {\n    layers[event.target.name].showing = event.target.checked\n    setLayers({\n      ...layers,\n      [event.target.name]: layers[event.target.name]\n    })\n  }\n\n  const legendColour = (el, legend, layers) => {\n    switch (el) {\n      case 'Outdoor cool spaces':\n        return '#6D6FA2'\n      case 'Indoor cool spaces':\n        return '#9888CD'\n      case 'Cooler areas':\n        return 'rgba(0,255,255,0.9)'\n      case 'Water fountains':\n        return '#43B7EF'\n      default:\n        return legend\n          ? legend.filter(key => Object.keys(key)[0] === layers[el].value)[0][\n              layers[el].value\n            ]\n          : ''\n    }\n  }\n\n  const [anchorEl, setAnchorEl] = React.useState(null)\n  const [aboutText, setAboutText] = React.useState(null)\n\n  const handleInfoClick = (event, el) => {\n    setAnchorEl(event.currentTarget)\n    setAboutText(event.currentTarget.getAttribute('about'))\n  }\n\n  const handleInfoClose = () => {\n    setAnchorEl(null)\n  }\n\n  const open = Boolean(anchorEl)\n  const id = open ? 'simple-popover' : undefined\n\n  return legend ? (\n    <FormControl component=\"fieldset\">\n      <FormLabel component=\"legend\">Choose map overlays to show</FormLabel>\n      <FormGroup>\n        {Object.keys(layers).map((el, i) => (\n          <div style={{ display: 'flex' }} key={i}>\n            <FormControlLabel\n              key={i}\n              control={\n                <Switch\n                  key={i}\n                  color=\"primary\"\n                  style={{\n                    color: legendColour(el, legend, layers),\n                    ':checked': { color: 'red' }\n                  }}\n                  checked={layers[el].showing}\n                  onChange={handleChange}\n                  name={el}\n                />\n              }\n              label={el}\n            />\n            <InfoOutlinedIcon\n              style={{ height: 'unset' }}\n              onClick={handleInfoClick}\n              about={layers[el].about}\n            />\n          </div>\n        ))}\n      </FormGroup>\n      <Popover\n        id={id}\n        open={open}\n        anchorEl={anchorEl}\n        onClose={handleInfoClose}\n        anchorOrigin={{\n          vertical: 'bottom',\n          horizontal: 'center'\n        }}\n        transformOrigin={{\n          vertical: 'top',\n          horizontal: 'center'\n        }}\n      >\n        <Typography className={classes.typography}>{aboutText}</Typography>\n      </Popover>\n    </FormControl>\n  ) : (\n    <div style={{ textAlign: 'center', margin: '0 auto' }}>\n      <CircularProgress />\n    </div>\n  )\n}\n","/* eslint-disable no-use-before-define */\nimport React, { useEffect } from 'react'\nimport usePersistedState from '../hooks/usePersistedState'\nimport { makeStyles } from '@material-ui/core/styles'\nimport FormControl from '@material-ui/core/FormControl'\nimport TextField from '@material-ui/core/TextField'\nimport Autocomplete from '@material-ui/lab/Autocomplete'\n\nconst useStyles = makeStyles(theme => ({\n  formControl: {\n    margin: theme.spacing(1),\n    minWidth: 260\n  },\n  selectEmpty: {\n    marginTop: theme.spacing(2)\n  }\n}))\n\nconst options = [\n  {\n    title: 'Drinking water',\n    value: 'free_water',\n    filter: ['==', ['get', 'free_water'], 'true']\n  },\n  {\n    title: 'Seating',\n    value: 'seating_available',\n    filter: ['==', ['get', 'seating_available'], 'true']\n  },\n  {\n    title: 'Water feature',\n    value: 'water_feature',\n    filter: ['>', ['length', ['get', 'shade_seating']], 0]\n  },\n  {\n    title: 'Access for people with disabilities',\n    value: 'people with disabilities',\n    filter: ['in', 'people with disabilities', ['get', 'accessible']]\n  },\n  {\n    title: 'Toilets',\n    value: 'toilets',\n    filter: ['in', ['get', 'toilets'], 'Toilets are available on site']\n  }\n]\n\nexport default function Facilities({ map }) {\n  const classes = useStyles()\n  const [value, setValue] = usePersistedState('facilities', [])\n\n  const filterMap = (map, newValue) => {\n    if (newValue.length > 0) {\n      const filter = newValue.map(el => el.filter)\n      filter.unshift('all')\n      map && map.setFilter('boroughdesignatedcoolspaces', filter)\n      map && map.setFilter('boroughdesignatedcoolspaces-glow', filter)\n    } else {\n      map && map.setFilter('boroughdesignatedcoolspaces', null)\n      map && map.setFilter('boroughdesignatedcoolspaces-glow', null)\n    }\n  }\n\n  useEffect(() => {\n    filterMap(map, value)\n  }, [map, value])\n\n  return (\n    <FormControl className={classes.formControl}>\n      <Autocomplete\n        multiple\n        value={value}\n        id=\"facilities\"\n        onChange={(event, newValue) => {\n          setValue(newValue)\n        }}\n        options={options}\n        getOptionLabel={option => (option ? option.title : '')}\n        renderInput={params => (\n          <TextField {...params} label=\"Choose facilities\" />\n        )}\n      />\n    </FormControl>\n  )\n}\n","import React from 'react'\nimport { makeStyles } from '@material-ui/core/styles'\nimport TextField from '@material-ui/core/TextField'\nimport Button from '@material-ui/core/Button'\nimport FormControl from '@material-ui/core/FormControl'\nimport FormLabel from '@material-ui/core/FormLabel'\nimport Checkbox from '@material-ui/core/Checkbox'\nimport FormControlLabel from '@material-ui/core/FormControlLabel'\nimport Snackbar from '@material-ui/core/Snackbar'\nimport MuiAlert from '@material-ui/lab/Alert'\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    '& > *': {\n      margin: theme.spacing(1),\n      display: 'flex'\n    }\n  },\n  snack: {\n    width: '100%',\n    '& > * + *': {\n      marginTop: theme.spacing(2)\n    }\n  }\n}))\n\nfunction Alert(props) {\n  return <MuiAlert elevation={6} variant=\"filled\" {...props} />\n}\n\nexport default function Feedback() {\n  const classes = useStyles()\n\n  const [email, setEmail] = React.useState('')\n  const [feedback, setFeedback] = React.useState('')\n  const [checked, setChecked] = React.useState(false)\n\n  const handleChangeEmail = event => {\n    setEmail(event.target.value)\n  }\n  const handleChangeFeedback = event => {\n    setFeedback(event.target.value)\n  }\n  const handleChangeChecked = event => {\n    setChecked(event.target.checked)\n  }\n\n  const [snackOpen, setSnackOpen] = React.useState(false)\n\n  const openSnackBar = () => {\n    setSnackOpen(true)\n    setEmail('')\n    setFeedback('')\n    setChecked(false)\n  }\n\n  const closeSnackBar = (event, reason) => {\n    if (reason === 'clickaway') {\n      return\n    }\n\n    setSnackOpen(false)\n  }\n\n  function handleSubmit(event) {\n    event.preventDefault()\n    const data = {\n      correspondent: event.target.email.value\n        ? event.target.email.value\n        : 'noreply@london.gov.uk',\n      app: 'cool-spaces-feedback',\n      title: 'cool-spaces feedback',\n      message:\n        event.target.feedback.value +\n        '. Permission to contact: ' +\n        event.target.permission.checked\n    }\n    // PREPARE POST HEADERS AND BODY\n    const requestOptions = {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify(data)\n    }\n\n    async function asyncFetch(requestOptions) {\n      const response = await fetch(\n        'https://apps.london.gov.uk/node-mailer/mail/send',\n        requestOptions\n      )\n      const text = await response.text()\n      text.includes('Message accepted for delivery')\n        ? openSnackBar()\n        : console.err('not sent')\n    }\n\n    asyncFetch(requestOptions)\n  }\n\n  return (\n    <>\n      <Snackbar\n        open={snackOpen}\n        autoHideDuration={6000}\n        onClose={closeSnackBar}\n      >\n        <Alert onClose={closeSnackBar} severity=\"success\">\n          Thanks, your message has been sent to the team and a receipt emailed\n          to the email contact provided.\n        </Alert>\n      </Snackbar>\n      <FormControl component=\"fieldset\" fullWidth={true}>\n        <FormLabel component=\"legend\">\n          We are keen to hear from users of the map as to what they found useful\n          and any improvements we could make. Please leave your comments,\n          suggestions or questions to the team below.\n        </FormLabel>\n        <form\n          onSubmit={handleSubmit}\n          className={classes.root}\n          noValidate\n          autoComplete=\"on\"\n        >\n          <TextField\n            required\n            id=\"email\"\n            label=\"Your email\"\n            value={email}\n            onChange={handleChangeEmail}\n          />\n          <TextField\n            multiline\n            rowsMax={20}\n            required\n            id=\"feedback\"\n            label=\"Your feedback\"\n            value={feedback}\n            onChange={handleChangeFeedback}\n          />\n          <FormControlLabel\n            control={\n              <Checkbox\n                checked={checked}\n                onChange={handleChangeChecked}\n                name=\"permission\"\n                color=\"secondary\"\n                id=\"permission\"\n              />\n            }\n            label=\"Tick here if you give us permission to email this contact\"\n          />\n          <Button variant=\"contained\" type=\"submit\">\n            Send\n          </Button>\n        </form>\n      </FormControl>\n    </>\n  )\n}\n","import SvgIcon from '@material-ui/core/SvgIcon'\n\nexport default function WaterFeatureIcon(props) {\n  return (\n    <SvgIcon {...props}>\n      <path d=\"m22 15.743c-1.11 0-1.73-0.37-2.18-0.64-0.37-0.22-0.6-0.36-1.15-0.36-0.56 0-0.78 0.13-1.15 0.36-0.45 0.27-1.07 0.64-2.18 0.64s-1.73-0.37-2.18-0.64c-0.37-0.22-0.6-0.36-1.15-0.36-0.56 0-0.78 0.13-1.15 0.36-0.45 0.27-1.07 0.64-2.18 0.64s-1.73-0.37-2.18-0.64c-0.37-0.22-0.6-0.36-1.15-0.36s-0.78 0.13-1.15 0.36c-0.47 0.27-1.09 0.64-2.2 0.64v-2c0.56 0 0.78-0.13 1.15-0.36 0.45-0.27 1.07-0.64 2.18-0.64s1.73 0.37 2.18 0.64c0.37 0.22 0.6 0.36 1.15 0.36 0.56 0 0.78-0.13 1.15-0.36 0.45-0.27 1.07-0.64 2.18-0.64s1.73 0.37 2.18 0.64c0.37 0.22 0.6 0.36 1.15 0.36s0.78-0.13 1.15-0.36c0.45-0.27 1.07-0.64 2.18-0.64s1.73 0.37 2.18 0.64c0.37 0.22 0.6 0.36 1.15 0.36v2z\" />\n      <path d=\"m22 20.243c-1.11 0-1.73-0.37-2.18-0.64-0.37-0.22-0.6-0.36-1.15-0.36-0.56 0-0.78 0.13-1.15 0.36-0.46 0.27-1.07 0.64-2.18 0.64s-1.73-0.37-2.18-0.64c-0.37-0.22-0.6-0.36-1.15-0.36-0.56 0-0.78 0.13-1.15 0.36-0.46 0.27-1.08 0.64-2.19 0.64s-1.73-0.37-2.18-0.64c-0.37-0.23-0.6-0.36-1.15-0.36s-0.78 0.13-1.15 0.36c-0.46 0.27-1.08 0.64-2.19 0.64v-2c0.56 0 0.78-0.13 1.15-0.36 0.46-0.27 1.08-0.64 2.19-0.64s1.73 0.37 2.18 0.64c0.37 0.23 0.59 0.36 1.15 0.36s0.78-0.13 1.15-0.36c0.46-0.27 1.08-0.64 2.19-0.64s1.73 0.37 2.18 0.64c0.37 0.22 0.6 0.36 1.15 0.36s0.78-0.13 1.15-0.36c0.45-0.27 1.07-0.64 2.18-0.64s1.73 0.37 2.18 0.64c0.37 0.23 0.59 0.36 1.15 0.36z\" />\n      <path d=\"m21.97 6.7342c-1.11 0-1.73-0.37-2.18-0.64-0.37-0.22-0.6-0.36-1.15-0.36-0.56 0-0.78 0.13-1.15 0.36-0.45 0.27-1.07 0.64-2.18 0.64s-1.73-0.37-2.18-0.64c-0.37-0.22-0.6-0.36-1.15-0.36-0.56 0-0.78 0.13-1.15 0.36-0.45 0.27-1.07 0.64-2.18 0.64s-1.73-0.37-2.18-0.64c-0.37-0.22-0.6-0.36-1.15-0.36s-0.78 0.13-1.15 0.36c-0.47 0.27-1.09 0.64-2.2 0.64v-2c0.56 0 0.78-0.13 1.15-0.36 0.45-0.27 1.07-0.64 2.18-0.64s1.73 0.37 2.18 0.64c0.37 0.22 0.6 0.36 1.15 0.36 0.56 0 0.78-0.13 1.15-0.36 0.45-0.27 1.07-0.64 2.18-0.64s1.73 0.37 2.18 0.64c0.37 0.22 0.6 0.36 1.15 0.36s0.78-0.13 1.15-0.36c0.45-0.27 1.07-0.64 2.18-0.64s1.73 0.37 2.18 0.64c0.37 0.22 0.6 0.36 1.15 0.36v2z\" />\n      <path d=\"m21.97 11.234c-1.11 0-1.73-0.37-2.18-0.64-0.37-0.22-0.6-0.36-1.15-0.36-0.56 0-0.78 0.13-1.15 0.36-0.46 0.27-1.07 0.64-2.18 0.64s-1.73-0.37-2.18-0.64c-0.37-0.22-0.6-0.36-1.15-0.36-0.56 0-0.78 0.13-1.15 0.36-0.46 0.27-1.08 0.64-2.19 0.64s-1.73-0.37-2.18-0.64c-0.37-0.23-0.6-0.36-1.15-0.36s-0.78 0.13-1.15 0.36c-0.46 0.27-1.08 0.64-2.19 0.64v-2c0.56 0 0.78-0.13 1.15-0.36 0.46-0.27 1.08-0.64 2.19-0.64s1.73 0.37 2.18 0.64c0.37 0.23 0.59 0.36 1.15 0.36s0.78-0.13 1.15-0.36c0.46-0.27 1.08-0.64 2.19-0.64s1.73 0.37 2.18 0.64c0.37 0.22 0.6 0.36 1.15 0.36s0.78-0.13 1.15-0.36c0.45-0.27 1.07-0.64 2.18-0.64s1.73 0.37 2.18 0.64c0.37 0.23 0.59 0.36 1.15 0.36z\" />\n    </SvgIcon>\n  )\n}\n","import React from 'react'\nimport { makeStyles } from '@material-ui/core/styles'\nimport PinDropIcon from '@material-ui/icons/PinDrop'\nimport AccessTimeIcon from '@material-ui/icons/AccessTime'\nimport AccessibilityNewIcon from '@material-ui/icons/AccessibilityNew'\nimport WcIcon from '@material-ui/icons/Wc'\nimport LocalDrinkIcon from '@material-ui/icons/LocalDrink'\nimport BeachAccessIcon from '@material-ui/icons/BeachAccess'\nimport AirlineSeatLegroomExtraIcon from '@material-ui/icons/AirlineSeatLegroomExtra'\nimport List from '@material-ui/core/List'\nimport ListItem from '@material-ui/core/ListItem'\nimport ListItemIcon from '@material-ui/core/ListItemIcon'\nimport ListItemText from '@material-ui/core/ListItemText'\nimport Grid from '@material-ui/core/Grid'\nimport Typography from '@material-ui/core/Typography'\nimport WaterFeatureIcon from './WaterFeatureIcon'\nimport InfoOutlinedIcon from '@material-ui/icons/InfoOutlined'\nimport Popover from '@material-ui/core/Popover'\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    flexGrow: 1\n  },\n  paper: {\n    padding: theme.spacing(2),\n    textAlign: 'center',\n    color: theme.palette.text.secondary\n  },\n  scrollGrid: {\n    maxHeight: '20rem',\n    overflowY: 'scroll',\n    '*::-webkit-scrollbar': {\n      '-webkit-appearance': 'none',\n      width: '7px'\n    },\n    '*::-webkit-scrollbar-thumb': {\n      borderRadius: '4px',\n      backgroundColor: 'rgba(0, 0, 0, .5)',\n      '-webkit-box-shadow': '0 0 1px rgba(255, 255, 255, .5)'\n    }\n  },\n  typography: {\n    padding: theme.spacing(2)\n  }\n}))\n\nconst Tooltip = ({ feature }) => {\n  const classes = useStyles()\n  const {\n    cool_space_name,\n    cs_address1,\n    cs_address2,\n    cs_postcode,\n    opening_hour,\n    accessible,\n    toilets,\n    free_water,\n    // water_nearby,\n    shaded_well,\n    about_shade,\n    shade_seating,\n    water_feature,\n    seating_available,\n    tier\n  } = feature.properties\n\n  const [anchorEl, setAnchorEl] = React.useState(null)\n  const [aboutText, setAboutText] = React.useState(null)\n\n  const handleInfoClick = (event, el) => {\n    setAnchorEl(event.currentTarget)\n    switch (tier) {\n      case 'Tier 1':\n        setAboutText(\n          'Tier 1: free public access, open 10-5 weekdays and weekends where possible, free drinking water, fully accessible, toilets, shaded seating, water features'\n        )\n        break\n      case 'Tier 2':\n        setAboutText(\n          'Tier 2: free public access, open at specified times, specified accessibility, drinking water available on site or within walking distance, shaded seating'\n        )\n        break\n      default:\n        setAboutText(\n          'Tier 3: free public access to outdoor open space, some shade available'\n        )\n        break\n    }\n  }\n\n  const handleInfoClose = () => {\n    setAnchorEl(null)\n  }\n\n  const open = Boolean(anchorEl)\n  const id = open ? 'simple-popover' : undefined\n\n  return (\n    feature.hasOwnProperty('properties') && (\n      <div className={classes.root}>\n        {/*Object.entries(feature.properties).reduce(\n        (acc, curr) => (\n          <div>\n            {acc}\n            {curr[0]} : {curr[1]}\n          </div>\n        ),\n        ''\n      )*/}\n        <Typography variant=\"h4\" gutterBottom>\n          {cool_space_name}\n        </Typography>\n        <Typography variant=\"h5\" gutterBottom>\n          Outdoor - {tier}\n          <InfoOutlinedIcon\n            style={{ height: 'unset', float: 'right' }}\n            onClick={handleInfoClick}\n            about={aboutText}\n          />\n          <Popover\n            id={id}\n            open={open}\n            anchorEl={anchorEl}\n            onClose={handleInfoClose}\n            anchorOrigin={{\n              vertical: 'bottom',\n              horizontal: 'center'\n            }}\n            transformOrigin={{\n              vertical: 'top',\n              horizontal: 'center'\n            }}\n          >\n            <Typography className={classes.typography}>{aboutText}</Typography>\n          </Popover>\n        </Typography>\n\n        <Grid container spacing={3} className={classes.scrollGrid}>\n          <List dense={true}>\n            {cs_address1 && cs_postcode ? (\n              <Grid item xs>\n                <ListItem>\n                  <ListItemIcon>\n                    <PinDropIcon />\n                  </ListItemIcon>\n                  <ListItemText\n                    primary={cs_address1}\n                    secondary={\n                      (cs_address2 && cs_postcode ? cs_address2 : '') +\n                      (cs_address2\n                        ? cs_postcode\n                          ? ' ' + cs_postcode\n                          : ''\n                        : cs_postcode\n                        ? cs_postcode\n                        : '')\n                    }\n                  />\n                </ListItem>\n              </Grid>\n            ) : null}\n\n            {opening_hour ? (\n              <Grid item xs>\n                <ListItem>\n                  <ListItemIcon>\n                    <AccessTimeIcon />\n                  </ListItemIcon>\n                  <ListItemText primary={opening_hour} />\n                </ListItem>\n              </Grid>\n            ) : null}\n            {accessible ? (\n              <Grid item xs>\n                <ListItem>\n                  <ListItemIcon>\n                    <AccessibilityNewIcon />\n                  </ListItemIcon>\n                  <ListItemText\n                    primary={\n                      'Accessible for ' + typeof accessible === 'object'\n                        ? JSON.parse(accessible).reduce(\n                            (acc, curr) => acc + `, ` + curr\n                          )\n                        : 'Accessible for People with disabilities; children; older people; pregnant women; people with underlying health issues'\n                    }\n                  />\n                </ListItem>\n              </Grid>\n            ) : null}\n\n            {toilets ? (\n              <Grid item xs>\n                <ListItem>\n                  <ListItemIcon>\n                    <WcIcon />\n                  </ListItemIcon>\n                  <ListItemText primary={toilets} />\n                </ListItem>\n              </Grid>\n            ) : null}\n            {free_water ? (\n              <Grid item xs>\n                <ListItem>\n                  <ListItemIcon>\n                    <LocalDrinkIcon />\n                  </ListItemIcon>\n                  <ListItemText primary=\"Free drinking water\" />\n                  {/*water_nearby ? water_nearby : ''*/}\n                </ListItem>\n              </Grid>\n            ) : null}\n            {shaded_well && about_shade ? (\n              <Grid item xs>\n                <ListItem>\n                  <ListItemIcon>\n                    <BeachAccessIcon />\n                  </ListItemIcon>\n                  <ListItemText\n                    primary={\n                      about_shade +\n                      (shade_seating ? '. There is also shaded seating' : null)\n                    }\n                  />\n                </ListItem>\n              </Grid>\n            ) : null}\n\n            {water_feature &&\n            !['other', 'No', 'N/A'].includes(water_feature) ? (\n              <Grid item xs>\n                <ListItem>\n                  <ListItemIcon>\n                    <WaterFeatureIcon />\n                  </ListItemIcon>\n                  <ListItemText primary={water_feature} />\n                </ListItem>\n              </Grid>\n            ) : null}\n            {seating_available ? (\n              <Grid item xs>\n                <ListItem>\n                  <ListItemIcon>\n                    <AirlineSeatLegroomExtraIcon />\n                  </ListItemIcon>\n                  <ListItemText primary=\"Seating is available\" />\n                </ListItem>\n              </Grid>\n            ) : null}\n          </List>\n        </Grid>\n      </div>\n    )\n  )\n}\n\nexport default Tooltip\n","/* eslint-disable no-use-before-define */\nimport React, { useState, useEffect } from 'react'\nimport usePersistedState from '../hooks/usePersistedState'\nimport { makeStyles } from '@material-ui/core/styles'\nimport FormControl from '@material-ui/core/FormControl'\nimport TextField from '@material-ui/core/TextField'\nimport Autocomplete from '@material-ui/lab/Autocomplete'\nimport LinearProgress from '@material-ui/core/LinearProgress'\nimport centroid from '@turf/centroid'\nimport distance from '@turf/distance'\n\nimport useDebounce from '../hooks/useDebounce'\nimport { MAPBOX_TOKEN } from '../App'\n\nconst useStyles = makeStyles(theme => ({\n  formControl: {\n    margin: theme.spacing(1),\n    minWidth: 260\n  },\n  selectEmpty: {\n    marginTop: theme.spacing(2)\n  }\n}))\n\nexport function Geocoder(props) {\n  const { map } = props\n  const [searchTerm, setSearchTerm] = useState('')\n  const [value, setValue] = usePersistedState('searchvalue', '')\n  const [results, setResults] = useState([])\n  const [isSearching, setIsSearching] = useState(false)\n  const [isLocating, setIsLocating] = useState(false)\n\n  const classes = useStyles()\n\n  // The hook will only return the latest value (what we passed in) ...\n  // ... if it's been more than 500ms since it was last called.\n  const debouncedSearchTerm = useDebounce(searchTerm, 500)\n\n  const moveHandler = () => {\n    map &&\n      console.log(\n        map\n          .queryRenderedFeatures(\n            [\n              map.project(map.getBounds().getSouthWest()),\n              map.project(map.getBounds().getNorthEast())\n            ],\n            {\n              layers: ['boroughdesignatedcoolspaces']\n            }\n          )\n          // .querySourceFeatures('tileserver-gl', {\n          //   sourceLayer: 'boroughdesignatedcoolspaces'\n          // })\n          .map(el => {\n            return (\n              el.properties.cool_space_name +\n              ' ' +\n              Math.round(\n                distance(\n                  centroid(el).geometry.coordinates,\n                  map.getCenter().toArray(),\n                  {\n                    units: 'kilometers'\n                  }\n                ) * 1000\n              )\n            )\n          })\n      )\n  }\n\n  const forwardGeocode = selection => {\n    if (selection) {\n      setValue(selection)\n      const fly = (lng, lat, zoom) => {\n        if (map) {\n          map.flyTo({\n            center: [lng, lat],\n            zoom: zoom,\n            speed: 2,\n            curve: 1,\n            easing(t) {\n              return t\n            }\n          })\n          map.getSource('single-point').setData({\n            type: 'Feature',\n            geometry: {\n              type: 'Point',\n              coordinates: [lng, lat]\n            }\n          })\n        }\n      }\n      let lng, lat, zoom\n      if (selection && selection.place_name === 'Go to my location') {\n        setIsLocating(true)\n        const success = position => {\n          lng = position.coords.longitude\n          lat = position.coords.latitude\n          zoom = 14\n          setIsLocating(false)\n          map.once('moveend', moveHandler)\n          fly(lng, lat, zoom)\n        }\n        navigator.geolocation.getCurrentPosition(success)\n      } else {\n        if (selection.id) {\n          // when selection has an id it is from mapbox gazetteer\n          lng = selection.geometry.coordinates[0]\n          lat = selection.geometry.coordinates[1]\n        } else {\n          // ...it is from the geojson of features\n          const centre = centroid(selection).geometry.coordinates\n          lng = centre[0]\n          lat = centre[1]\n          fly(lng, lat, zoom)\n        }\n        zoom = 14\n        fly(lng, lat, zoom)\n      }\n    }\n  }\n\n  // API call\n  useEffect(() => {\n    const currentLocation = { id: 'search', place_name: 'Go to my location' }\n    if (debouncedSearchTerm) {\n      setIsSearching(true)\n      searchCharacters(debouncedSearchTerm).then(results => {\n        setIsSearching(false)\n        results.unshift(currentLocation)\n        setResults(results)\n      })\n    } else {\n      setResults([currentLocation])\n    }\n  }, [debouncedSearchTerm])\n\n  const clearSearch = () => {\n    setValue('')\n    map.getSource('single-point').setData({\n      type: 'Feature',\n      geometry: {\n        type: 'Point',\n        coordinates: [0, 0]\n      }\n    })\n  }\n  const groupBy = option => (option.id ? 'location' : 'cool space')\n\n  return (\n    <FormControl className={classes.formControl}>\n      <Autocomplete\n        id=\"geocoder\"\n        options={results}\n        groupBy={groupBy}\n        value={value}\n        onInputChange={e => e && setSearchTerm(e.target.value)}\n        onChange={(event, selection, reason) =>\n          reason === 'clear' ? clearSearch() : forwardGeocode(selection)\n        }\n        getOptionLabel={option =>\n          option\n            ? option.place_name\n              ? option.place_name\n              : option.properties.cool_space_name\n            : ''\n        }\n        getOptionSelected={(option, value) =>\n          option.place_name\n            ? option.place_name === value.place_name\n            : option.cool_space_name === value.cool_space_name\n        }\n        renderInput={params => (\n          <TextField\n            {...params}\n            label=\"Search a place name or address/postcode\"\n          />\n        )}\n      />\n      {isLocating || isSearching ? <LinearProgress /> : ''}\n    </FormControl>\n  )\n\n  // API search function\n  function searchCharacters(search) {\n    return fetch(\n      `https://api.mapbox.com/geocoding/v5/mapbox.places/${search}.json?bbox=-0.489,51.28,0.236,51.686&access_token=${MAPBOX_TOKEN}`\n    )\n      .then(r => r.json())\n      .then(r => {\n        // fetch(`http://localhost:3004/hello?name=${search}`)\n        return fetch(\n          `https://apps.london.gov.uk/cool-spaces-feature-geocoder/hello?name=${search}`\n        )\n          .then(r2 => r2.json())\n          .then(r2 => r2.concat(r.features))\n      })\n      .catch(error => {\n        console.error(error)\n        return []\n      })\n  }\n}\n","import { useState, useEffect } from 'react'\n\n// Our hook\nexport default function useDebounce(value, delay) {\n  // State and setters for debounced value\n  const [debouncedValue, setDebouncedValue] = useState(value)\n\n  useEffect(\n    () => {\n      // Set debouncedValue to value (passed in) after the specified delay\n      const handler = setTimeout(() => {\n        setDebouncedValue(value)\n      }, delay)\n\n      // Return a cleanup function that will be called every time ...\n      // ... useEffect is re-called. useEffect will only be re-called ...\n      // ... if value changes (see the inputs array below).\n      // This is how we prevent debouncedValue from changing if value is ...\n      // ... changed within the delay period. Timeout gets cleared and restarted.\n      // To put it in context, if the user is typing within our app's ...\n      // ... search box, we don't want the debouncedValue to update until ...\n      // ... they've stopped typing for more than 500ms.\n      return () => {\n        clearTimeout(handler)\n      }\n    },\n    // Only re-call effect if value changes\n    // You could also add the \"delay\" var to inputs array if you ...\n    // ... need to be able to change that dynamically.\n    [value]\n  )\n\n  return debouncedValue\n}\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport { BrowserRouter as Router, Route } from 'react-router-dom'\nimport { QueryParamProvider } from 'use-query-params'\nimport './index.css'\nimport { App } from './App'\nimport * as serviceWorker from './serviceWorker'\n\nclass ErrorBoundary extends React.Component {\n  constructor(props) {\n    super(props)\n    this.state = { hasError: false }\n  }\n\n  static getDerivedStateFromError(error) {\n    // Update state so the next render will show the fallback UI.\n    return { hasError: true }\n  }\n\n  componentDidCatch(error, errorInfo) {\n    // You can also log the error to an error reporting service\n    console.log(error, errorInfo)\n  }\n\n  render() {\n    if (this.state.hasError) {\n      // You can render any custom fallback UI\n      return <h1>Something went wrong.</h1>\n    }\n\n    return this.props.children\n  }\n}\n\nReactDOM.render(\n  // <React.StrictMode>\n  <Router>\n    <QueryParamProvider ReactRouterRoute={Route}>\n      <App />\n    </QueryParamProvider>\n  </Router>,\n  // </React.StrictMode>,\n  document.getElementById('root')\n)\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister()\n","import React from 'react'\n\nexport default function usePersistedState(key, defaultValue) {\n  const [state, setState] = React.useState(() => {\n    const persistedState = localStorage.getItem(key)\n    return persistedState ? JSON.parse(persistedState) : defaultValue\n  })\n  React.useEffect(() => {\n    window.localStorage.setItem(key, JSON.stringify(state))\n  }, [state, key])\n  return [state, setState]\n}\n","import React, { useState, useEffect, useRef } from 'react'\nimport mapboxgl from 'maplibre-gl'\nimport 'maplibre-gl/dist/maplibre-gl.css'\nimport ReactDOM from 'react-dom'\n\n// import { useFullscreen, useToggle } from 'react-use'\n\nimport PropTypes from 'prop-types'\n\nimport { mapLayers } from './mapLayers.js'\nimport { mapAbout } from './mapAbout.js'\nimport Tooltip from './components/Tooltip'\nimport TooltipIndoor from './components/TooltipIndoor'\nimport TooltipHover from './components/TooltipHover'\n\nimport { useStyles } from './styles.jsx'\n\nimport usePersistedState from './hooks/usePersistedState'\nimport clsx from 'clsx'\n\nimport IconButton from '@material-ui/core/IconButton'\nimport SwipeableDrawer from '@material-ui/core/SwipeableDrawer'\nimport AppBar from '@material-ui/core/AppBar'\nimport Toolbar from '@material-ui/core/Toolbar'\nimport CssBaseline from '@material-ui/core/CssBaseline'\nimport Typography from '@material-ui/core/Typography'\nimport Divider from '@material-ui/core/Divider'\nimport MenuIcon from '@material-ui/icons/Menu'\nimport ChevronRightIcon from '@material-ui/icons/ChevronRight'\nimport KeyboardArrowDownIcon from '@material-ui/icons/KeyboardArrowDown'\nimport Tabs from '@material-ui/core/Tabs'\nimport Tab from '@material-ui/core/Tab'\nimport Box from '@material-ui/core/Box'\nimport Paper from '@material-ui/core/Paper'\nimport FormControl from '@material-ui/core/FormControl'\nimport FormLabel from '@material-ui/core/FormLabel'\nimport useMediaQuery from '@material-ui/core/useMediaQuery'\n// import FullscreenIcon from '@material-ui/icons/Fullscreen'\n// import FullscreenExitIcon from '@material-ui/icons/FullscreenExit'\n\nimport SwitchesGroup from './components/SwitchesGroup'\nimport { Geocoder } from './components/Geocoder'\nimport Facilities from './components/Facilities'\nimport Feedback from './components/Feedback'\n\nimport { useTheme } from '@material-ui/core/styles'\n\nimport * as Survey from 'survey-react'\n\n// import centroid from '@turf/centroid'\n// import distance from '@turf/distance'\n\nconst iOS = process.browser && /iPad|iPhone|iPod/.test(navigator.userAgent)\n\nconst MAPBOX_TOKEN =\n  'pk.eyJ1IjoiZ2xhLWdpcyIsImEiOiJjanBvNGh1bncwOTkzNDNueWt5MGU1ZGtiIn0.XFxLdq2dXttcXSXTiREPTA'\n\nfunction App({ showBorder = false, onTilesLoad = null }) {\n  const theme = useTheme()\n  const smallScreen = useMediaQuery(theme.breakpoints.down('sm'))\n  const classes = useStyles(theme)\n\n  const ref = useRef(null)\n  // const [show, toggle] = useToggle(false)\n  // const isFullscreen = useFullscreen(ref, show, {\n  //   onClose: () => toggle(false)\n  // })\n\n  Survey.StylesManager.applyTheme('bootstrap')\n\n  const surveyJSON = {\n    surveyId: 'e5d72f1d-01a7-4894-9d8e-44ee9c52af4e',\n    surveyPostId: '82a2ba1b-e580-4034-88f5-f2b3975b1c87'\n  }\n\n  const [layers, setLayers] = useState(mapLayers)\n  // const [layers, setLayers] = usePersistedState('layers', mapLayers)\n\n  const [legend, setLegend] = useState(null)\n\n  const [drawerOpen, setDrawerOpen] = usePersistedState('drawer', true)\n\n  const handleDrawerOpen = () => {\n    setDrawerOpen(true)\n    setTimeout(function() {\n      map && map.resize()\n      smallScreen\n        ? map.easeTo({\n            padding: { bottom: 150, top: 0 },\n            duration: 1000\n          })\n        : map.easeTo({\n            padding: { right: 150, left: 0 },\n            duration: 1000\n          })\n    }, 10)\n  }\n\n  const handleDrawerClose = () => {\n    setDrawerOpen(false)\n    setTimeout(function() {\n      map && map.resize()\n      smallScreen\n        ? map.easeTo({\n            padding: { top: 150, bottom: 0 },\n            duration: 1000\n          })\n        : map.easeTo({\n            padding: { left: 150, right: 0 },\n            duration: 1000\n          })\n    }, 10)\n  }\n\n  const drawerOpened = e => {\n    console.log(e, 'opened')\n  }\n\n  const MenuButton = ({ bottom }) => {\n    return (\n      <AppBar\n        position={smallScreen ? 'absolute' : 'fixed'}\n        style={{\n          backgroundColor: 'unset',\n          visibility: 'hidden',\n          bottom: bottom\n        }}\n        className={clsx(classes.appBar, {\n          [classes.appBarShift]: drawerOpen\n        })}\n      >\n        <Toolbar>\n          <Typography\n            variant=\"h6\"\n            noWrap\n            className={classes.title}\n          ></Typography>\n          <IconButton\n            color=\"inherit\"\n            aria-label=\"open drawer\"\n            edge=\"end\"\n            onClick={handleDrawerOpen}\n            className={clsx(drawerOpen && classes.hide)}\n            style={{ visibility: 'visible' }}\n          >\n            <MenuIcon />\n          </IconButton>\n        </Toolbar>\n      </AppBar>\n    )\n  }\n\n  // TABS\n  const TabPanel = props => {\n    const { children, value, index, ...other } = props\n\n    return (\n      // isReady && (\n      <div\n        role=\"tabpanel\"\n        hidden={value !== index}\n        id={`simple-tabpanel-${index}`}\n        aria-labelledby={`scrollable-force-tab-${index}`}\n        {...other}\n      >\n        {value === index && <Box p={3}>{children}</Box>}\n      </div>\n      // )\n    )\n  }\n\n  TabPanel.propTypes = {\n    children: PropTypes.node,\n    index: PropTypes.any.isRequired,\n    value: PropTypes.any.isRequired\n  }\n\n  const tabsProps = index => {\n    return {\n      id: `scrollable-force-tab-${index}`,\n      'aria-controls': `scrollable-force-tabpanel-${index}`\n    }\n  }\n  const [tabValue, setTabValue] = usePersistedState('tab', 0)\n\n  const tabChange = (event, newValue) => {\n    setTabValue(Number(newValue))\n  }\n\n  const TabsContent = () => {\n    return (\n      <Paper square>\n        <Tabs\n          value={tabValue}\n          onChange={tabChange}\n          variant=\"scrollable\"\n          scrollButtons=\"auto\"\n          aria-label=\"scrollable force tabs\"\n        >\n          <Tab label=\"Layers\" {...tabsProps(0)} />\n          <Tab label=\"Find a cool space\" {...tabsProps(1)} />\n          <Tab label=\"Feedback\" {...tabsProps(2)} />\n          <Tab label=\"Register a cool space\" {...tabsProps(3)} />\n          <Tab label=\"About\" {...tabsProps(4)} />\n        </Tabs>\n      </Paper>\n    )\n  }\n\n  const mapContainerRef = useRef(null)\n  const [map, setMap] = useState(null)\n  const tooltipRef = useRef(\n    new mapboxgl.Popup({ offset: 5, closeButton: false })\n  )\n  const tooltipHoverRef = useRef(\n    new mapboxgl.Popup({ offset: 5, closeButton: false })\n  )\n\n  const [lng, setLng] = usePersistedState('lng', -0.1)\n  const [lat, setLat] = usePersistedState('lat', 51.49)\n  const [zoom, setZoom] = usePersistedState('zoom', 9)\n\n  // LAYER FILTERS\n  useEffect(() => {\n    if (layers && map) {\n      Object.keys(layers).map(el =>\n        map\n          .getStyle()\n          .layers.map(el => el.id)\n          .filter(elfilter => elfilter.startsWith(layers[el].value))\n          .map(innerel =>\n            map.setLayoutProperty(\n              innerel,\n              'visibility',\n              layers[el].showing ? 'visible' : 'none'\n            )\n          )\n      )\n    }\n  }, [layers, map])\n\n  // MAIN PROGRAM\n  useEffect(() => {\n    // Initialize map when component mounts\n    const map = new mapboxgl.Map({\n      container: mapContainerRef.current,\n      style: 'cool_spaces.json',\n      center: [lng, lat],\n      zoom: zoom,\n      pitch: 10\n    })\n    map.touchZoomRotate.disableRotation()\n\n    map.addControl(\n      new mapboxgl.NavigationControl({\n        showCompass: false,\n        showZoom: true\n      }),\n      'top-left'\n    )\n\n    map.on('load', () => {\n      // LEGEND\n      setLegend(\n        map\n          .getStyle()\n          .layers.filter(el =>\n            // PICK MAP LAYERS THAT MATCH THE LAYERS OBJECT CONTENT\n            Object.values(layers)\n              .map(el => el.value)\n              .includes(el.id)\n          )\n          .map(el => [el.id, el.paint])\n          .map(el => {\n            const ret = {}\n            ret[el[0]] =\n              el[1][Object.keys(el[1]).filter(el => el.includes('color'))[0]]\n            return ret\n          })\n      )\n      map.on('mouseenter', 'boroughdesignatedcoolspaces', e => {\n        map.getCanvas().style.cursor = 'pointer'\n      })\n      map.on('mouseleave', 'boroughdesignatedcoolspaces', e => {\n        map.getCanvas().style.cursor = ''\n      })\n      map.on('mouseenter', 'boroughdesignatedcoolspaces_indoor', e => {\n        map.getCanvas().style.cursor = 'pointer'\n      })\n      map.on('mouseleave', 'boroughdesignatedcoolspaces_indoor', e => {\n        map.getCanvas().style.cursor = ''\n      })\n\n      // add tooltip when users mouse move over a point\n      map.on('mousemove', e => {\n        const features = map.queryRenderedFeatures(e.point)\n        if (\n          features.length &&\n          features.filter(el =>\n            el.layer.id.startsWith('boroughdesignatedcoolspaces')\n          ).length > 0\n        ) {\n          const feature = features.filter(el =>\n            el.layer.id.startsWith('boroughdesignatedcoolspaces')\n          )[0]\n          // Create tooltip node\n          const tooltipNode = document.createElement('div')\n          ReactDOM.render(<TooltipHover feature={feature} />, tooltipNode)\n\n          // Set tooltip on map\n          tooltipHoverRef.current\n            .setLngLat(e.lngLat)\n            .setDOMContent(tooltipNode)\n            .addTo(map)\n        } else {\n          tooltipHoverRef.current.remove()\n        }\n      })\n\n      // add tooltip when users mouse move over a point\n      map.on('click', 'boroughdesignatedcoolspaces', e => {\n        const features = map.queryRenderedFeatures(e.point)\n        if (\n          features.length &&\n          Object.values(layers)\n            .map(el => el.value)\n            .includes(\n              features.filter(\n                el => el.layer.id === 'boroughdesignatedcoolspaces'\n              )[0].sourceLayer\n            )\n        ) {\n          const feature = features.filter(\n            el => el.layer.id === 'boroughdesignatedcoolspaces'\n          )[0]\n          const tooltipNode = document.createElement('div')\n          ReactDOM.render(<Tooltip feature={feature} />, tooltipNode)\n          tooltipRef.current\n            .setLngLat(e.lngLat)\n            .setDOMContent(tooltipNode)\n            .addTo(map)\n        } else {\n          tooltipRef.current.remove()\n        }\n      })\n\n      // map.on('click', 'findafountain', e => {\n      //   const features = map.queryRenderedFeatures(e.point)\n      //   if (\n      //     features.length &&\n      //     Object.values(layers)\n      //       .map(el => el.value)\n      //       .includes(\n      //         features.filter(el => el.layer.id === 'findafountain')[0].layer.id\n      //       )\n      //   ) {\n      //     const feature = features.filter(\n      //       el => el.layer.id === 'findafountain'\n      //     )[0]\n      //     const tooltipNode = document.createElement('div')\n      //     ReactDOM.render(<Tooltip feature={feature} />, tooltipNode)\n      //     tooltipRef.current\n      //       .setLngLat(e.lngLat)\n      //       .setDOMContent(tooltipNode)\n      //       .addTo(map)\n      //   } else {\n      //     tooltipRef.current.remove()\n      //   }\n      // })\n\n      map.on('click', 'boroughdesignatedcoolspaces_indoor', e => {\n        const features = map.queryRenderedFeatures(e.point)\n        if (\n          features.length &&\n          Object.values(layers)\n            .map(el => el.value)\n            .includes(\n              features.filter(\n                el => el.layer.id === 'boroughdesignatedcoolspaces_indoor'\n              )[0].layer.id\n            )\n        ) {\n          const feature = features.filter(\n            el => el.layer.id === 'boroughdesignatedcoolspaces_indoor'\n          )[0]\n          const tooltipNode = document.createElement('div')\n          ReactDOM.render(<TooltipIndoor feature={feature} />, tooltipNode)\n          tooltipRef.current\n            .setLngLat(e.lngLat)\n            .setDOMContent(tooltipNode)\n            .addTo(map)\n        } else {\n          tooltipRef.current.remove()\n        }\n      })\n\n      map.keyboard.disable()\n\n      // const moveHandler = () => {\n      //   var f = map.querySourceFeatures('tileserver-gl', {\n      //     sourceLayer: 'boroughdesignatedcoolspaces'\n      //   })\n      //   // var from = turf.point([-75.343, 39.984]);\n      //   // var to = turf.point([-75.534, 39.123]);\n      //   // var options = {units: 'kilometers'};\n      //\n      //   console.log(\n      //     f.map(el => {\n      //       return (\n      //         el.properties.cool_space_name +\n      //         ' ' +\n      //         distance(\n      //           centroid(el).geometry.coordinates,\n      //           map.getCenter().toArray(),\n      //           {\n      //             units: 'kilometers'\n      //           }\n      //         )\n      //       )\n      //     })\n      //   )\n      // }\n\n      map.on('moveend', () => {\n        const { lng, lat } = map.getCenter()\n        const zoom = map.getZoom()\n        setLng(lng)\n        setLat(lat)\n        setZoom(zoom)\n        // moveHandler()\n      })\n\n      // USED BY THE GEOCODER TO ADD A POINT ON MATCH\n      map.addSource('single-point', {\n        type: 'geojson',\n        data: {\n          type: 'FeatureCollection',\n          features: []\n        }\n      })\n\n      map.addLayer({\n        visible: true,\n        id: 'point',\n        source: 'single-point',\n        type: 'circle',\n        paint: {\n          'circle-radius': 10,\n          'circle-color': '#00e48e'\n        }\n      })\n\n      // useState hook\n      setMap(map)\n    })\n\n    // Clean up on unmount\n    return () => map.remove()\n  }, []) // eslint-disable-line\n\n  const gotoLocation = (lng, lat, zoom = 17) => {\n    map &&\n      map.flyTo({\n        center: [lng, lat],\n        zoom: zoom,\n        speed: 2,\n        curve: 1,\n        easing(t) {\n          return t\n        }\n      })\n  }\n\n  useEffect(() => gotoLocation(lng, lat, zoom), [lng, lat, zoom]) // eslint-disable-line\n\n  return (\n    <div ref={ref} className={classes.root}>\n      <CssBaseline />\n      {!smallScreen && <MenuButton left={smallScreen ? 0 : 'auto'} />}\n      <main\n        className={clsx(classes.content, {\n          [classes.contentShift]: drawerOpen\n        })}\n      >\n        <div className={classes.drawerHeader} />\n        <div>\n          <div\n            ref={mapContainerRef}\n            style={{\n              position: 'absolute',\n              top: 0,\n              left: 0,\n              height: '100%',\n              width: '100%'\n              // `${\n              //   smallScreen\n              //     ? '100%'\n              //     : drawerOpen\n              //     ? document.querySelector('#root').offsetWidth -\n              //       drawerWidth +\n              //       'px'\n              //     : '100%'\n              // }`\n            }}\n          />\n        </div>\n      </main>\n      <SwipeableDrawer\n        disableBackdropTransition={!iOS}\n        disableDiscovery={iOS}\n        className={classes.drawer}\n        variant=\"persistent\"\n        anchor={smallScreen ? 'bottom' : 'right'}\n        open={drawerOpen}\n        onOpen={drawerOpened}\n        onClose={drawerOpened}\n        classes={{\n          paper: classes.drawerPaper\n        }}\n      >\n        <div className={classes.drawerHeader}>\n          <IconButton onClick={handleDrawerClose}>\n            {smallScreen ? <KeyboardArrowDownIcon /> : <ChevronRightIcon />}\n          </IconButton>\n          <h3 style={{ textAlign: 'center', margin: '0 auto' }}>\n            LONDON COOL SPACES\n          </h3>{' '}\n          {/*<IconButton onClick={toggle}>\n            {isFullscreen ? <FullscreenExitIcon /> : <FullscreenIcon />}\n          </IconButton>*/}\n        </div>\n        <Divider />\n        {!smallScreen && <TabsContent />}\n        <TabPanel value={tabValue} index={0}>\n          <div\n            style={{\n              display: 'flex',\n              flexDirection: 'column',\n              justifyContent: 'center'\n            }}\n          >\n            <SwitchesGroup\n              layers={layers}\n              setLayers={setLayers}\n              legend={legend}\n            />\n            <FormLabel component=\"legend\">\n              <p>\n                To search for cool spaces in a specific location or near you,\n                please go to{' '}\n                <button onClick={() => setTabValue(1)}>\n                  <span style={{ fontVariant: 'small-caps' }}>\n                    find a cool space\n                  </span>{' '}\n                </button>\n              </p>\n              <p>\n                More information about cool spaces tiers and the sources of data\n                for the different layers on the map can be found in{' '}\n                <button onClick={() => setTabValue(4)}>\n                  <span style={{ fontVariant: 'small-caps' }}>about</span>\n                </button>\n              </p>\n              <p>\n                We are still accepting new registrations of indoor and outdoor\n                cool spaces. If you would like to register a site please\n                complete the form in{' '}\n                <button onClick={() => setTabValue(3)}>\n                  <span\n                    style={{\n                      fontVariant: 'small-caps'\n                    }}\n                  >\n                    register a cool space\n                  </span>{' '}\n                </button>\n              </p>\n            </FormLabel>\n          </div>\n        </TabPanel>\n        <TabPanel value={tabValue} index={1}>\n          <div\n            style={{\n              display: 'flex',\n              flexDirection: 'column',\n              justifyContent: 'center'\n            }}\n          >\n            <FormControl component=\"fieldset\" fullWidth={true}>\n              <FormLabel component=\"legend\">\n                Filter cool spaces by facilities and find a location by search\n                or your device position.\n              </FormLabel>\n              <Facilities map={map} />\n              <Geocoder map={map} />\n              {/*feature.hasOwnProperty('properties') && (\n                <Tooltip feature={feature} />\n              )*/}\n            </FormControl>\n            <FormLabel component=\"legend\">\n              To choose what map features to view, please select from{' '}\n              <button onClick={() => setTabValue(0)}>\n                <span style={{ fontVariant: 'small-caps' }}>layers</span>\n              </button>{' '}\n            </FormLabel>\n          </div>\n        </TabPanel>\n        <TabPanel value={tabValue} index={2}>\n          <div style={{ display: 'flex', justifyContent: 'center' }}>\n            <Feedback />\n          </div>\n        </TabPanel>\n        <TabPanel value={tabValue} index={3}>\n          <div style={{ display: 'flex', justifyContent: 'center' }}>\n            <Survey.Survey json={surveyJSON} />\n          </div>\n        </TabPanel>\n        <TabPanel value={tabValue} index={4}>\n          <div style={{ display: 'flex', justifyContent: 'center' }}>\n            <Typography variant=\"body2\" className={classes.typography}>\n              {mapAbout}\n            </Typography>\n          </div>\n        </TabPanel>\n\n        {smallScreen && <Divider />}\n        {smallScreen && <TabsContent />}\n      </SwipeableDrawer>\n      {smallScreen && (\n        <div style={{ bottom: 0 }}>\n          <MenuButton />\n        </div>\n      )}\n    </div>\n  )\n}\nexport { MAPBOX_TOKEN, App }\n"],"sourceRoot":""}